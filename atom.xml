<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Chromer&#39;s Blog</title>
  
  
  <link href="http://narutohinata.github.io/atom.xml" rel="self"/>
  
  <link href="http://narutohinata.github.io/"/>
  <updated>2022-03-27T03:54:06.391Z</updated>
  <id>http://narutohinata.github.io/</id>
  
  <author>
    <name>chromer</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å­—ç¬¦å’Œç¼–ç </title>
    <link href="http://narutohinata.github.io/2022/03/26/%E5%AD%97%E7%AC%A6%E5%92%8C%E7%BC%96%E7%A0%81/"/>
    <id>http://narutohinata.github.io/2022/03/26/%E5%AD%97%E7%AC%A6%E5%92%8C%E7%BC%96%E7%A0%81/</id>
    <published>2022-03-26T09:26:15.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><!-- æ‰‹æ¡é”Ÿæ–¤æ‹·ï¼Œç›´å‘¼çƒ«çƒ«çƒ«ã€‚ --><p>è®¡ç®—æœºä¸­çš„å­˜å‚¨å™¨å”¯ä¸€å¯ä»¥å­˜å‚¨çš„æ˜¯bit(0/1)ï¼Œå¦‚æœæƒ³è¦åœ¨è®¡ç®—æœºä¸Šå¤„ç†ä¿¡æ¯ï¼Œå°±å¿…é¡»æŠŠå®ƒæŒ‰ä½å­˜å‚¨ã€‚å› æ­¤ä¸ºäº†å°†æ–‡æœ¬è¡¨ç¤ºä¸ºæ•°å­—å½¢å¼ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªç³»ç»Ÿæ¥ä¸ºæ¯ä¸€ä¸ªå­—ç¬¦èµ‹äºˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„IDã€‚</p><p>å…·æœ‰è¿™ç§åŠŸèƒ½çš„ç³»ç»Ÿè¢«ç§°ä¸º<strong>å­—ç¬¦é›†ï¼ˆCharset</strong>ã€‚å…¶å®å­—ç¬¦é›†å°±æ˜¯ä¸€ä¸ªmapï¼Œä¸€ä¸ªå­—ç¬¦åˆ°è¡¨ç¤ºè¿™ä¸ªå­—ç¬¦çš„å”¯ä¸€ID[è¿™äº›Idå°±è¢«ç§°ä½œ<strong>ç ç‚¹</strong>(<strong>code point</strong>)]çš„æ˜ å°„é›†åˆã€‚æœ‰äº†å­—ç¬¦é›†åˆæˆ‘ä»¬å°±å°†æ–‡æœ¬æ˜ å°„æˆæ•°å­—å½¢å¼ã€‚ä½†æ˜¯éœ€è¦ä¸€ä¸ªè§„åˆ™ç”¨æ¥è§„å®šå¦‚ä½•åœ¨è®¡ç®—æœºä¸­å­˜å‚¨è¿™äº›æ•°å­—(ä½¿ç”¨å¤šå°‘å­—èŠ‚?)ï¼Œäºæ˜¯æˆ‘ä»¬å°±æœ‰äº†<strong>å­—ç¬¦ç¼–ç (encoding)</strong>ã€‚</p><h3 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h3><p>åœ¨è®¡ç®—æœºæ—©æœŸåº”å¯¹çš„å­—ç¬¦åœºæ™¯è¿˜å¾ˆç®€å•(å¤§å°å†™æ‹‰ä¸å­—æ¯(26 * 2 = 52) + æ•°å­—0-9(10) + ä¸€äº›ç¬¦å· ä¸è¶…è¿‡128ä¸ª)ï¼Œå› æ­¤äº1963å‘å¸ƒçš„ASCIIæ˜¯å¯ä»¥åº”ä»˜å½“æ—¶çš„åœºæ™¯ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220319234553566-7a392a5b7a2cc1732cf7b30c53275155f1e07969dbffd478ebd8d0a7e675409a.png" alt="image-20220319234553566"></p><p>æ ‡å‡†ASCIIåªç”¨åˆ°çš„1byteçš„å7ä½ã€‚çœ‹ä¸‹å›¾å°±å¯ä»¥çŸ¥é“ASCIIä½¿ç”¨èŒƒå›´æ˜¯$0x00$ ~ $ 0x7F$ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/USASCII_code_chart-9e9c85c0d5f0c819bcf7d61c0cce9152e0e359b2cffe96d2b5507b690edafc20.png" alt=""></p><h3 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h3><p>éšç€è®¡ç®—æœºçš„å‘å±•å’Œäº’è”ç½‘çš„æ™®åŠï¼Œè®¡ç®—æœºéœ€è¦é¢å¯¹å„ä¸ªå›½å®¶çš„è¯­è¨€ã€‚æ­¤æ—¶ASCIIå¾ˆæ˜¾ç„¶æ— æ³•æ»¡è¶³éœ€æ±‚äº†ï¼Œäºæ˜¯å„ä¸ªå›½å®¶éƒ½å‘å¸ƒäº†è‡ªå·±è¯­è¨€çš„å­—ç¬¦é›†ï¼Œæˆ‘ä»¬å›½å®¶ä¹Ÿæ˜¯åœ¨1980å¹´å‘å¸ƒäº†åŸºäºASCIIæ‰©å±•çš„ä¸­æ–‡å­—ç¬¦é›†<a href="https://zh.wikipedia.org/wiki/GB_2312"><strong>GB2312</strong></a>ã€‚</p><p>äºæ˜¯å»ºç«‹ä¸€ä¸ªæ¶µç›–ä¸–ç•Œä¸Šæ‰€æœ‰æ–‡æœ¬çš„ç¼–ç è§„èŒƒæˆä¸ºäº†ä¸€ä¸ªè¿«åˆ‡çš„éœ€æ±‚ã€‚åœ¨å›½é™…åŒ–æ ‡å‡†ç»„ç»‡å’Œç¾å›½å‡ å¤§å•†ä¸šå…¬å¸åˆä½œä¸‹ï¼Œ1991å¹´Unicodeå‘å¸ƒã€‚</p><p>æœ€åˆçš„Unicodeç¼–ç ä½¿ç”¨16ä½çš„ç¼–ç ç©ºé—´ä¹Ÿå°±æ˜¯2Byteè¿™æ ·ç†è®ºä¸Šæœ€å¤šå¯ä»¥è¡¨ç¤º$2^{16}$(å³65536)ä¸ªå­—ç¬¦ï¼Œæ˜¾ç„¶è¿™æ ·è¦è¡¨ç¤ºä¸–ç•Œä¸Šæ‰€æœ‰è¯­è¨€ä¸­çš„å­—ç¬¦æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚åæ¥åœ¨Unicode4.0è§„èŒƒä¸­è€ƒè™‘åˆ°äº†è¿™ç§æƒ…å†µï¼Œå®šä¹‰äº†ä¸€ç»„é™„åŠ å­—ç¬¦ç¼–ç ï¼Œé™„åŠ å­—ç¬¦ç¼–ç ä½¿ç”¨2ä¸ª16ä½è¡¨ç¤ºï¼Œç›®å‰Unicodeç¼–ç èŒƒå›´æ˜¯U+0000~U+10FFFFã€‚</p><p>Unicodeå°†è¿™äº›ç ç‚¹æŒ‰ç…§æ¯ç»„$2^{16}$ï¼ˆ65536ï¼‰åˆ†ç»„ï¼Œæ¯ç»„è¢«ç§°ä¸ºä¸€ä¸ª<strong>å¹³é¢</strong>ï¼ˆplaneï¼‰ã€‚Unicodeä¸€å…±å°†è¿™äº›ç ç‚¹åˆ†æˆäº†17ä¸ªå¹³é¢ï¼ŒPlane0 ~ Plane16ã€‚Plane0åˆè¢«ç§°ä½œåŸºæœ¬å¤šæ–‡æœ¬å¹³é¢ï¼ˆBMP)ï¼Œå…¶ä»–å¹³é¢ç»Ÿç§°ä¸ºè¾…åŠ©å¹³é¢ã€‚</p><div class="table-container"><table><thead><tr><th>å¹³é¢</th><th>èŒƒå›´</th><th>ä¸­æ–‡åç§°</th><th>è‹±æ–‡åç§°</th></tr></thead><tbody><tr><td>0å·å¹³é¢ï¼ˆPlane0)</td><td>U+0000 - U+FFFF</td><td>åŸºæœ¬å¤šæ–‡æœ¬å¹³é¢</td><td>BMP</td></tr><tr><td>1å·å¹³é¢ï¼ˆPlane1)</td><td>U+10000 - U+1FFFF</td><td>å¤šæ–‡ç§è¡¥å……å¹³é¢</td><td>SMP</td></tr><tr><td>2å·å¹³é¢(Plane2)</td><td>U+20000 - U+2FFFF</td><td>è¡¨æ„æ–‡å­—è¡¥å……å¹³é¢</td><td>SIP</td></tr><tr><td>3å·å¹³é¢(Plane3)</td><td>U+30000 - U+3FFFF</td><td>è¡¨æ„æ–‡å­—ç¬¬ä¸‰å¹³é¢</td><td>TIP</td></tr><tr><td>4å·å¹³é¢~13å·å¹³é¢</td><td>U+40000 - U+DFFFF</td><td>æœªä½¿ç”¨</td><td></td></tr><tr><td>14å·å¹³é¢(Plane14)</td><td>U+E0000 - U+EFFFF</td><td>ç‰¹åˆ«ç”¨é€”è¡¥å……å¹³é¢</td><td>SSP</td></tr><tr><td>15å·å¹³é¢(Plane15)</td><td>U+F0000 - U+FFFFF</td><td>ä¿ç•™ä½œä¸ºç§äººä½¿ç”¨åŒºï¼ˆAåŒºï¼‰</td><td>PUA-A</td></tr><tr><td>16å·å¹³é¢(Plane16)</td><td>U+100000 - U+10FFFF</td><td>ä¿ç•™ä½œä¸ºç§äººä½¿ç”¨åŒºï¼ˆBåŒºï¼‰</td><td>PUA-B</td></tr><tr><td></td><td></td><td></td></tr></tbody></table></div><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220319235230869-4dcab2527238d5c0bdd623f6f8ea4330eb69877a02626bfd8a4cab02f41a1d00.png" alt="image-20220319235230869"></p><h3 id="Unicodeç¼–ç æ–¹æ¡ˆ"><a href="#Unicodeç¼–ç æ–¹æ¡ˆ" class="headerlink" title="Unicodeç¼–ç æ–¹æ¡ˆ"></a>Unicodeç¼–ç æ–¹æ¡ˆ</h3><p>Unicode æ²¡æœ‰è§„å®šå­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶ç å¦‚ä½•å­˜å‚¨ã€‚ä»¥æ±‰å­—â€œæ±‰â€ä¸ºä¾‹ï¼Œå®ƒçš„ Unicode ç ç‚¹æ˜¯ 0x6c49ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ˜¯ 110110001001001ï¼ŒäºŒè¿›åˆ¶æ•°æœ‰ 15 ä½ï¼Œè¿™ä¹Ÿå°±è¯´æ˜äº†å®ƒè‡³å°‘éœ€è¦ 2 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚å¯ä»¥æƒ³è±¡ï¼Œåœ¨ Unicode å­—å…¸ä¸­å¾€åçš„å­—ç¬¦å¯èƒ½å°±éœ€è¦ 3 ä¸ªå­—èŠ‚æˆ–è€… 4 ä¸ªå­—èŠ‚ï¼Œç”šè‡³æ›´å¤šå­—èŠ‚æ¥è¡¨ç¤ºäº†ã€‚</p><p>è¿™å°±å¯¼è‡´äº†ä¸€äº›é—®é¢˜ï¼Œè®¡ç®—æœºæ€ä¹ˆçŸ¥é“ä½ è¿™ä¸ª 2 ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯èƒ½ä¼šæƒ³åˆ°ï¼Œé‚£å°±å–ä¸ªæœ€å¤§çš„ï¼Œå‡å¦‚ Unicode ä¸­æœ€å¤§çš„å­—ç¬¦ç”¨ 4 å­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°†æ‰€æœ‰çš„å­—ç¬¦éƒ½ç”¨ 4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œä¸å¤Ÿçš„å°±å¾€å‰é¢è¡¥ 0ï¼ˆUTF-32)ã€‚è¿™æ ·ç¡®å®å¯ä»¥è§£å†³ç¼–ç é—®é¢˜ï¼Œä½†æ˜¯å´é€ æˆäº†ç©ºé—´çš„æå¤§æµªè´¹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªè‹±æ–‡æ–‡æ¡£ï¼Œé‚£æ–‡ä»¶å¤§å°å°±å¤§å‡ºäº† 3 å€ï¼Œè¿™æ˜¾ç„¶æ˜¯æ— æ³•æ¥å—çš„ã€‚</p><p>äºæ˜¯ï¼Œä¸ºäº†è¾ƒå¥½çš„è§£å†³ Unicode çš„ç¼–ç é—®é¢˜ï¼Œ UTF-8 å’Œ UTF-16 ä¸¤ç§å½“å‰æ¯”è¾ƒæµè¡Œçš„ç¼–ç æ–¹å¼è¯ç”Ÿäº†ã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ª UTF-32 çš„ç¼–ç æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°é‚£ç§å®šé•¿ç¼–ç ï¼Œå­—ç¬¦ç»Ÿä¸€ä½¿ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œè™½ç„¶çœ‹ä¼¼æ–¹ä¾¿ï¼Œä½†æ˜¯å´ä¸å¦‚å¦å¤–ä¸¤ç§ç¼–ç æ–¹å¼ä½¿ç”¨å¹¿æ³›ã€‚</p><h3 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h3><p>UTF-8 æ˜¯ä¸€ä¸ªéå¸¸æƒŠè‰³çš„ç¼–ç æ–¹å¼ï¼Œæ¼‚äº®çš„<strong>å®ç°äº†å¯¹ ASCII ç çš„å‘åå…¼å®¹</strong>ï¼Œä»¥ä¿è¯ Unicode å¯ä»¥è¢«å¤§ä¼—æ¥å—ã€‚</p><p><strong>UTF-8 æ˜¯ç›®å‰äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ Unicode ç¼–ç æ–¹å¼</strong>ï¼Œå®ƒçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯<strong>å¯å˜é•¿ã€‚å®ƒå¯ä»¥ä½¿ç”¨ 1 - 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œæ ¹æ®å­—ç¬¦çš„ä¸åŒå˜æ¢é•¿åº¦</strong>ã€‚ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¯¹äºå•ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œç¬¬ä¸€ä½è®¾ä¸º 0ï¼Œåé¢çš„ 7 ä½å¯¹åº”è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚å› æ­¤ï¼Œå¯¹äºè‹±æ–‡ä¸­çš„ 0 - 127 å·å­—ç¬¦ï¼Œä¸ ASCII ç å®Œå…¨ç›¸åŒã€‚è¿™æ„å‘³ç€ ASCII ç é‚£ä¸ªå¹´ä»£çš„æ–‡æ¡£ç”¨ UTF-8 ç¼–ç æ‰“å¼€å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚</li><li>å¯¹äºéœ€è¦ä½¿ç”¨ N ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºçš„å­—ç¬¦ï¼ˆN &gt; 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ N ä½éƒ½è®¾ä¸º 1ï¼Œç¬¬ N + 1 ä½è®¾ä¸º 0ï¼Œå‰©ä½™çš„ N - 1 ä¸ªå­—èŠ‚çš„å‰ä¸¤ä½éƒ½è®¾ä½ 10ï¼Œå‰©ä¸‹çš„äºŒè¿›åˆ¶ä½åˆ™ä½¿ç”¨è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹æ¥å¡«å……ã€‚</li></ol><p>ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">Unicode åå…­è¿›åˆ¶ç ç‚¹èŒƒå›´</th><th style="text-align:left">UTF-8 äºŒè¿›åˆ¶</th></tr></thead><tbody><tr><td style="text-align:left">0000 0000 - 0000 007F</td><td style="text-align:left">0xxxxxxx</td></tr><tr><td style="text-align:left">0000 0080 - 0000 07FF</td><td style="text-align:left">110xxxxx 10xxxxxx</td></tr><tr><td style="text-align:left">0000 0800 - 0000 FFFF</td><td style="text-align:left">1110xxxx 10xxxxxx 10xxxxxx</td></tr><tr><td style="text-align:left">0001 0000 - 0010 FFFF</td><td style="text-align:left">11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td></tr></tbody></table></div><h4 id="ç¼–ç è¿‡ç¨‹"><a href="#ç¼–ç è¿‡ç¨‹" class="headerlink" title="ç¼–ç è¿‡ç¨‹"></a>ç¼–ç è¿‡ç¨‹</h4><p>ä¸‹å›¾å±•ç¤ºäº†ä¸­æ–‡â€œæˆ‘â€çš„UTF-8çš„ç¼–ç è¿‡ç¨‹ï¼Œæœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯0xE68891</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220320174733759-4e87c30dcf657497ade3913b1b7a6fb0c478f49d0e06f39ae13531ed1e06c12e.png" alt="image-20220320174733759"></p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220326225545448-e03623515fcac258c665e877a9acff55d58af34568edb349df8d9b4fa2ebe60d.png" alt="image-20220326225545448"></p><h3 id="UTF-16"><a href="#UTF-16" class="headerlink" title="UTF-16"></a>UTF-16</h3><p>UTF-16 ç¼–ç ä»‹äº UTF-32 ä¸ UTF-8 ä¹‹é—´ï¼ŒåŒæ—¶<strong>ç»“åˆäº†å®šé•¿å’Œå˜é•¿ä¸¤ç§ç¼–ç æ–¹æ³•çš„ç‰¹ç‚¹</strong>ã€‚å®ƒçš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼š<strong>åŸºæœ¬å¹³é¢çš„å­—ç¬¦å ç”¨ 2 ä¸ªå­—èŠ‚ï¼Œè¾…åŠ©å¹³é¢çš„å­—ç¬¦å ç”¨ 4 ä¸ªå­—èŠ‚</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒUTF-16 çš„ç¼–ç é•¿åº¦è¦ä¹ˆæ˜¯ 2 ä¸ªå­—èŠ‚ï¼ˆU+0000 åˆ° U+FFFFï¼‰ï¼Œè¦ä¹ˆæ˜¯ 4 ä¸ªå­—èŠ‚ï¼ˆU+010000 åˆ° U+10FFFFï¼‰ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸¤ä¸ªå­—èŠ‚æ—¶ï¼Œåˆ°åº•æ˜¯æŠŠè¿™ä¸¤ä¸ªå­—èŠ‚å½“ä½œä¸€ä¸ªå­—ç¬¦è¿˜æ˜¯ä¸åé¢çš„ä¸¤ä¸ªå­—èŠ‚ä¸€èµ·å½“ä½œä¸€ä¸ªå­—ç¬¦å‘¢ï¼Ÿ</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå·§å¦™çš„åœ°æ–¹ï¼Œåœ¨åŸºæœ¬å¹³é¢å†…ï¼Œä» U+D800 åˆ° U+DFFF ($2^{11}$)æ˜¯ä¸€ä¸ªç©ºæ®µï¼Œå³è¿™äº›ç ç‚¹ä¸å¯¹åº”ä»»ä½•å­—ç¬¦ã€‚å› æ­¤ï¼Œè¿™ä¸ªç©ºæ®µå¯ä»¥ç”¨æ¥æ˜ å°„è¾…åŠ©å¹³é¢çš„å­—ç¬¦ã€‚</p><p>è¾…åŠ©å¹³é¢çš„å­—ç¬¦ä½å…±æœ‰ $2^{20}$ ä¸ªï¼Œå› æ­¤è¡¨ç¤ºè¿™äº›å­—ç¬¦è‡³å°‘éœ€è¦ 20 ä¸ªäºŒè¿›åˆ¶ä½ã€‚UTF-16 å°†è¿™ 20 ä¸ªäºŒè¿›åˆ¶ä½åˆ†æˆä¸¤åŠï¼Œå‰ 10 ä½æ˜ å°„åœ¨ U+D800 åˆ° U+DBFFï¼ˆç©ºé—´å¤§å° $2^{10}$ï¼‰ï¼Œç§°ä¸ºé«˜ä½ï¼ˆHï¼‰ï¼Œå 10 ä½æ˜ å°„åœ¨ U+DC00 åˆ° U+DFFFï¼ˆç©ºé—´å¤§å° $2^{10}$ï¼‰ï¼Œç§°ä¸ºä½ä½ï¼ˆLï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªè¾…åŠ©å¹³é¢çš„å­—ç¬¦ï¼Œè¢«æ‹†æˆä¸¤ä¸ªåŸºæœ¬å¹³é¢çš„å­—ç¬¦è¡¨ç¤ºã€‚</p><p>å› æ­¤ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸¤ä¸ªå­—èŠ‚ï¼Œå‘ç°å®ƒçš„ç ç‚¹åœ¨ U+D800 åˆ° U+DBFF ä¹‹é—´ï¼Œå°±å¯ä»¥æ–­å®šï¼Œç´§è·Ÿåœ¨åé¢çš„ä¸¤ä¸ªå­—èŠ‚çš„ç ç‚¹ï¼Œåº”è¯¥åœ¨ U+DC00 åˆ° U+DFFF ä¹‹é—´ï¼Œè¿™å››ä¸ªå­—èŠ‚å¿…é¡»æ”¾åœ¨ä¸€èµ·è§£ç ã€‚</p><p>ä¸‹é¢ä»¥å¤æ±‰å­—â€œğ ®·â€ä¸ºä¾‹ï¼Œå±•ç¤ºä¸‹UTF-16ç¼–ç è¿‡ç¨‹ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220326234610643-dcc8023249489b472b7294466b55c330cafe40e3155c5e980efb6cf221771058.png" alt="image-20220326234610643"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;&gt;&lt;/a&gt;å¼•è¨€&lt;/h3&gt;&lt;!-- æ‰‹æ¡é”Ÿæ–¤æ‹·ï¼Œç›´å‘¼çƒ«çƒ«çƒ«ã€‚ --&gt;
&lt;p&gt;è®¡ç®—æœºä¸­çš„å­˜å‚¨å™¨å”¯ä¸€å¯ä»¥å­˜å‚¨çš„æ˜¯bit(0/1)ï¼Œå¦‚æœæƒ³è¦åœ¨è®¡ç®—æœºä¸Šå¤„ç†ä¿¡æ¯ï¼Œå°±å¿…é¡»æŠŠå®ƒæŒ‰ä½å­˜å‚¨</summary>
      
    
    
    
    
    <category term="å­—ç¬¦" scheme="http://narutohinata.github.io/tags/%E5%AD%97%E7%AC%A6/"/>
    
  </entry>
  
  <entry>
    <title>åˆè¯†Tapable</title>
    <link href="http://narutohinata.github.io/2022/01/15/%E5%88%9D%E8%AF%86Tapable/"/>
    <id>http://narutohinata.github.io/2022/01/15/%E5%88%9D%E8%AF%86Tapable/</id>
    <published>2022-01-15T15:54:53.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220115155511093-2ed441a5f834c63e8676e78594772484735e5258601f52bf4178a514e20ea380.png" alt="image-20220115155511093"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220115155511093-2ed441a5f834c63e8676e78594772484735e5258601f52bf</summary>
      
    
    
    
    
    <category term="tapable" scheme="http://narutohinata.github.io/tags/tapable/"/>
    
    <category term="webpack" scheme="http://narutohinata.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>Hexoè‡ªåŠ¨åŒ–éƒ¨ç½²æ•™ç¨‹</title>
    <link href="http://narutohinata.github.io/2022/01/14/Hexo%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/"/>
    <id>http://narutohinata.github.io/2022/01/14/Hexo%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/</id>
    <published>2022-01-14T22:23:15.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<p>æ­¤ç¯‡æ–‡ç« çŒ®ç»™å¹³å®‰ï¼Œè¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ å°†ä¼šçŸ¥é“å¦‚ä½•éƒ¨ç½²è‡ªå·±çš„åšå®¢åˆ°å…¬ç½‘ä¸Šå¹¶ä¸”è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚</p><ol><li>å®‰è£… hexo</li></ol><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220114223522332-7e218618f05355ab9271174ddb7b4f832c0e631247b7380da4ed4212de1b8041.png" alt="image-20220114223522332"></p><p>æˆåŠŸåä½ æ‰“å¼€<a href="http://localhost/4000/">http://localhost/4000/</a>åº”è¯¥å°±èƒ½çœ‹åˆ°åšå®¢å·²ç»æˆåŠŸè¿è¡Œåˆ°æœ¬åœ°äº†ã€‚</p><p>å½“ä½ æƒ³æ·»åŠ ä¸€ç¯‡æ–°æ–‡ç« æ—¶ï¼Œè¿è¡Œ<code>hexo new æ–‡ç« åç§°</code> hexoå°±ä¼šåœ¨å¯¹åº”<code>source/_posts</code>ç›®å½•æ–°å»ºä¸€ä¸ª<code>æ–‡ç« åç§°.md</code>çš„markdownæ–‡ä»¶ã€‚å¦å¤–è¿è¡Œ<code>hexo build</code>å¯ä»¥å°†æˆ‘ä»¬å†™çš„æ–‡ç« ç¼–è¯‘æˆé™æ€çš„ç½‘é¡µæ–‡ä»¶åˆ°<code>public</code>æ–‡ä»¶å¤¹é‡Œã€‚</p><ol><li><p>Gihubæ–°å»ºRepo</p><p>è¿™æ¬¡æˆ‘ä»¬å€ŸåŠ©githubæä¾›çš„pagesæœåŠ¡æ¥éƒ¨ç½²æˆ‘ä»¬çš„åšå®¢åˆ°å…¬ç½‘ã€‚è¿™æ¬¡éœ€è¦åˆ°githubä¸Šæ–°å»ºä¸€ä¸ªrepo. Repoçš„åç§°è¯·ç”¨ä½ çš„<code>&lt;è´¦å·å&gt;.github.io</code>å‘½åã€‚ç±»ä¼¼æˆ‘çš„githubè´¦æˆ·åæ˜¯<code>narutiohinata</code>ã€‚æ‰€ä»¥æˆ‘æ–°å»ºçš„Repoåç§°å°±æ˜¯ <code>narutohinata.github.io</code>ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220114225124151-5107e783f5c1139f34ef28cb34953d67945baf52516d3788d2dcc0690b0c0bd8.png" alt="image-20220114225124151"></p><p>å®Œæˆåï¼Œå°†ä½ æœ¬åœ°åšå®¢é¡¹ç›®pushåˆ°åˆšåˆšæ–°å»ºçš„Repoé‡Œã€‚è¿™éœ€è¦ä½ åœ¨ä½ çš„åšå®¢é¡¹ç›®åˆå§‹åŒ–git</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–git</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿™ä¸€æ­¥æ˜¯ä¸ºäº†å’Œgithubçš„é»˜è®¤ä¸»åˆ†æ”¯åç§°ç»Ÿä¸€</span></span><br><span class="line">git branch -m main</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  Github ä»“åº“åˆ°æœ¬åœ°</span></span><br><span class="line">git remote add origin https://github.com/username/username.github.io.git</span><br><span class="line"><span class="comment"># å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ° git</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  commit</span></span><br><span class="line">git commit -m <span class="string">&quot;initial&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æœ¬åœ°çš„æ–‡ä»¶æ¨é€åˆ° Github ä¸Šçš„ main åˆ†æ”¯</span></span><br><span class="line">git push -u origin main</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆåŠŸä¹‹åä½ åº”è¯¥åœ¨ä½ çš„Repoé‡Œçœ‹åˆ°å†…å®¹ã€‚</p></li><li><p>é…ç½®Travis CI</p></li></ol><p>é¦–å…ˆä½ éœ€è¦åˆ°<a href="https://www.travis-ci.com/">https://www.travis-ci.com/</a>å»æ³¨å†Œä½ çš„Travis CIçš„è´¦å·(ä½¿ç”¨ä½ çš„githubè´¦å·æ³¨å†Œ)ã€‚æˆåŠŸåç™»å½•è¿›å»ï¼Œç„¶åç‚¹å‡»å¤´åƒè¿›å…¥<code>Settings</code>é¡µé¢ã€‚è¿™é‡Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ä½ çš„githubè´¦å·å¯¹åº”çš„Reposï¼Œæ‰¾åˆ°ä½ åšå®¢çš„Repoï¼Œç‚¹å‡»æœ€å³ä¾§çš„<code>Settings</code>æŒ‰é’®ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220114231602743-2d1b4ce78c8efb71135bf97ad40f6b119c017ff5e5a8c6a61c898c06f10b2295.png" alt="image-20220114231602743"></p><p>åœ¨è¿›å…¥çš„Settingsé¡µé¢ï¼Œæ‰¾åˆ°Enviroment Variablesæ¨¡å—ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å»<code>Github</code>ç”³è¯·ä¸€ä¸ª<code>Personal access token</code>ã€‚</p><p>å›åˆ°github,ç‚¹å‡»å³ä¸Šè§’å¤´åƒè¿›å…¥Settingsé¡µé¢ã€‚åœ¨ä¾§è¾¹æ æ‰¾åˆ°<code>Developer settings</code>é€‰é¡¹ï¼Œç‚¹å‡»å®ƒè¿›å…¥<code>Developer settings</code>é¡µé¢ã€‚ç„¶åæ‰¾åˆ°<code>Personal access tokens</code>é€‰é¡¹ã€‚åœ¨è¿™é‡Œæ–°å»ºä¸€ä¸ªtoken, ç¡®ä¿å‹¾é€‰ä¸­repoï¼Œexpirationè¿‡æœŸæ—¶é—´æˆ‘è¿™é‡Œæ¨èNo expirationã€‚ä¸ç„¶çš„è¯ä½ å¯èƒ½éœ€è¦å®šæœŸæ›´æ–°tokenã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220114232635544-d33579adacb4917bd8488e0551bfc5b003a0710367fd2faba0253dcc2a44e427.png" alt="image-20220114232635544"></p><p>å®Œæˆåç‚¹å‡»æœ€ä¸‹æ–¹çš„Generate TokenæŒ‰é’®ï¼Œå°†å¾—åˆ°çš„<code>token</code>ä¿å­˜åˆ°ä¸Šä¸€æ­¥Travis CIé‡Œçš„Enviroment Variableé‡Œï¼Œä¸ºäº†ä¿æŒå’Œæˆ‘çš„ä¸€è‡´ï¼Œä½ ä¹ŸæŠŠç¯å¢ƒå˜é‡åç§°è®¾ä¸ºGH_TOKENå§ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220114232904230-9eef5d9f73fdae4625d1fb9863f52532cadca7f626a0bd1be740688844ed3709.png" alt="image-20220114232904230"></p><p>åˆ°è¿™ä¸€æ­¥ï¼ŒTravis CIåº”è¯¥ç®—é…ç½®okäº†ï¼Œä¸‹ä¸€æ­¥éœ€è¦å›åˆ°æˆ‘ä»¬é¡¹ç›®ç›®å½•ç»™å®ƒæ·»åŠ .tarvis.ymlæ–‡ä»¶ã€‚</p><ol><li>é…ç½®.travis.yml</li></ol><p>æˆ‘ä»¬åœ¨æœ¬åœ°åšå®¢é¡¹ç›®æ ¹ç›®å½•æ·»åŠ <code>.travis.yml</code>æ–‡ä»¶ã€‚ç„¶åè´´ä¸Šä¸‹é¢çš„é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">os:</span> <span class="string">linux</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">yarn</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">13</span> <span class="comment"># use nodejs v13 LTS-</span></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;&lt;your nickname&gt;&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;&lt;your email&gt;&quot;</span></span><br><span class="line"><span class="attr">cache:</span> <span class="string">npm</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># build master branch only</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">yarn</span> <span class="string">build</span> <span class="comment"># generate static files</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">strategy:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">pages</span></span><br><span class="line">  <span class="attr">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">$GH_TOKEN</span></span><br><span class="line">  <span class="attr">keep_history:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">on:</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">local_dir:</span> <span class="string">public</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°†è¿™ä¸ªæ–°æ·»åŠ çš„.travis.ymlæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ï¼ŒåŒæ—¶pushåˆ°githubä¸Šå»(ç¨å¾®è§£é‡Šä¸‹è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šå‘Šè¯‰travis ciæœåŠ¡æˆ‘éœ€è¦ä¸€ä¸ªlinuxåŒæ—¶æ‹¥æœ‰nodejsç‰ˆæœ¬ä¸º13çš„éƒ¨ç½²ç¯å¢ƒï¼Œæˆ‘éœ€è¦å®‰è£…yarn. åœ¨æˆåŠŸä¹‹åé…ç½®git config, å…‹éš†mainåˆ†æ”¯çš„å†…å®¹ï¼ŒæˆåŠŸåè¿è¡Œ<code>yarn build</code>ç”Ÿæˆé™æ€ç½‘é¡µæ–‡ä»¶,ç„¶åä¼šéƒ¨ç½²åˆ°åä¸º<code>gh-pages</code>çš„åˆ†æ”¯)ã€‚è¿™æ—¶å¦‚æœä½ çœ‹åˆ°ä½ çš„githubçš„åšå®¢ä»“åº“çš„git commitå€¼ä¹‹å‰å‡ºç°äº†ä¸€ä¸ªå°å›¾æ ‡ï¼Œçœ‹èµ·æ¥åƒæ˜¯åŠ è½½ä»€ä¹ˆä¸œè¥¿ã€‚é‚£ä¹ˆæ­å–œä½ ï¼Œè¯æ˜travis ciå·²ç»åœ¨å·¥ä½œäº†ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´å¦‚æœçœ‹åˆ°é‚£ä¸ªå›¾è¡¨å˜æˆäº†ç»¿è‰²çš„å°å¯¹é’©ï¼Œè¯æ˜æ„å»ºéƒ¨ç½²å·¥ä½œå®Œæˆã€‚æ£€æŸ¥ä¸‹ä½ çš„åˆ†æ”¯æ˜¯ä¸æ˜¯æœ‰äº†gh-pagesåˆ†æ”¯ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220114234446257-784a2160ca888723488ae7d04b19d97544dfd89c712f395907110b69c0c3bb72.png" alt="image-20220114234446257"></p><ol><li>é…ç½®Github PagesæœåŠ¡</li></ol><p>å¦‚æœä¸Šé¢æ­¥éª¤ä¸€åˆ‡é¡ºåˆ©ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹é…ç½®pagesæœåŠ¡äº†ã€‚åœ¨ä½ çš„åšå®¢ä»“åº“é¡µé¢ï¼Œç‚¹å‡»ä¸Šæ–¹çš„Settingsé€‰é¡¹ã€‚åœ¨è¿›å…¥çš„è®¾ç½®é¡µé¢é€‰æ‹©å·¦ä¾§æ çš„Pagesé€‰é¡¹å¡ã€‚å…·ä½“å¯å‚è€ƒgithubè¿™ç¯‡æ–‡ç« <a href="https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site">configuring-a-publishing-source-for-your-github-pages-site</a>. é…ç½®æˆåŠŸä¹‹åï¼Œå»æ‰“å¼€<code>https://yourname.github.io</code> å¦‚æœä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å°±å¯ä»¥åœ¨å…¬ç½‘è®¿é—®ä½ çš„åšå®¢äº†ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/image-20220114234739230-5c020d678d43d29dd8a4c4cd3efeca4d7a5144ed1d83232a43a627a2cdd921b2.png" alt="image-20220114234739230"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ­¤ç¯‡æ–‡ç« çŒ®ç»™å¹³å®‰ï¼Œè¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ å°†ä¼šçŸ¥é“å¦‚ä½•éƒ¨ç½²è‡ªå·±çš„åšå®¢åˆ°å…¬ç½‘ä¸Šå¹¶ä¸”è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£… hexo&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://chromer-blog.oss-cn-shanghai.aliyuncs.c</summary>
      
    
    
    
    
    <category term="CI/CD" scheme="http://narutohinata.github.io/tags/CI-CD/"/>
    
    <category term="Tutorial" scheme="http://narutohinata.github.io/tags/Tutorial/"/>
    
  </entry>
  
  <entry>
    <title>æ€ä¹ˆåœ¨cè¯­è¨€ä¸­è°ƒç”¨c++çš„ç±»éé™æ€æˆå‘˜å‡½æ•°</title>
    <link href="http://narutohinata.github.io/2022/01/06/%E6%80%8E%E4%B9%88%E5%9C%A8c%E8%AF%AD%E8%A8%80%E4%B8%AD%E8%B0%83%E7%94%A8c-%E7%9A%84%E7%B1%BB%E9%9D%9E%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0/"/>
    <id>http://narutohinata.github.io/2022/01/06/%E6%80%8E%E4%B9%88%E5%9C%A8c%E8%AF%AD%E8%A8%80%E4%B8%AD%E8%B0%83%E7%94%A8c-%E7%9A%84%E7%B1%BB%E9%9D%9E%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0/</id>
    <published>2022-01-06T21:58:35.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<p>è€ƒè™‘åˆ°ä¸‹é¢çš„ä»£ç ã€‚</p><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªcåº“ä»£ç <code>lib.c</code>,é‡Œé¢æœ‰ä¸ªå‡½æ•°å«<code>subscribe</code>,å®ƒæ¥å—ä¸€ä¸ªcallbackå‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.c</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span><span class="params">(*T)</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(<span class="keyword">void</span>* callback)</span> </span>&#123;</span><br><span class="line">  T cb = <span class="keyword">reinterpret_cast</span>&lt;T&gt;(callback);</span><br><span class="line">  cb(<span class="number">20</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ—¶åœ¨æˆ‘ä»¬çš„c++é¡¹ç›®ä¸­ï¼Œæˆ‘æƒ³å»è°ƒç”¨è¿™ä¸ª<code>subscribe</code>å‡½æ•°ï¼Œå¹¶å‡†å¤‡ä¼ å…¥ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> base = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">int</span> <span class="title">received</span><span class="params">(<span class="keyword">int</span> offset)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Demo::received</span><span class="params">(<span class="keyword">int</span> offset)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;received data is %d\n&quot;</span>, <span class="keyword">this</span>-&gt;base + offset);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;base + offset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Demo* demo = <span class="keyword">new</span> <span class="built_in">Demo</span>();</span><br><span class="line">    <span class="built_in">subscribe</span>(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">void</span>*&gt;(&amp;Demo::received));<span class="comment">// compiler error; reinterpret_cast from &#x27;int (Demo::*)(int)&#x27; to &#x27;void *&#x27; is not allowed</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªç¼–è¯‘é”™è¯¯ï¼Œçœ‹èµ·æ¥åƒæ˜¯ä¸ªç±»å‹é”™è¯¯ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä¼šè§¦å‘è¿™ä¸ªé”™è¯¯ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šè§¦å‘è¿™ä¸ªé”™è¯¯ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šè§¦å‘è¿™ä¸ªé”™è¯¯ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šè§¦å‘è¿™ä¸ªé”™è¯¯ï¼Ÿ</h2><p>å› ä¸ºè¿™ä¸ªc++çš„éé™æ€ç±»æˆå‘˜å‡½æ•°æœ‰ä¸€ä¸ªéšå¼çš„å‚æ•°å«<em>this</em>.å®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†è¿™ä¸ªç±»çš„å®ä¾‹å¯¹è±¡æœ¬èº«ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Demo* demo = <span class="keyword">new</span> <span class="built_in">Demo</span>();</span><br><span class="line">demo-&gt;<span class="built_in">received</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™è¡Œä»£ç ç­‰ä»·äºä¸‹é¢çš„è¿™è¡Œ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Demo* demo = <span class="keyword">new</span> <span class="built_in">Demo</span>();</span><br><span class="line"><span class="built_in">received</span>(demo, <span class="number">20</span>); <span class="comment">// recevicde(this, 20)</span></span><br></pre></td></tr></table></figure><p>å› æ­¤æˆ‘ä»¬ä¸èƒ½åœ¨cä»£ç ç›´æ¥è°ƒç”¨è¿™ä¸ªéé™æ€ç±»æˆå‘˜å‡½æ•°ã€‚ä½†æ˜¯ç±»çš„é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰è¿™ä¸ªçº¦æŸã€‚å› ä¸ºç±»çš„é™æ€ç±»æˆå‘˜å‡½æ•°å¹¶ä¸å’Œä»»æ„ä¸€ä¸ªç±»å®ä¾‹å¯¹è±¡ç»‘å®šã€‚</p><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢è¿™æ®µä»£ç ğŸ‘‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> base = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">received</span><span class="params">(<span class="keyword">int</span> offset)</span> </span>&#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">&quot;received data is %d\n&quot;</span>, <span class="keyword">this</span>-&gt;base + offset);</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">this</span>-&gt;base + offset;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">static_received</span><span class="params">(<span class="keyword">int</span> offset)</span> </span>&#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">&quot;static_received data is %d\n&quot;</span>, offset);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Demo* demo = <span class="keyword">new</span> <span class="built_in">Demo</span>();</span><br><span class="line">    <span class="built_in">subscribe</span>(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">void</span>*&gt;(&amp;Demo::static_received));<span class="comment">// ğŸ‘Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸºäºä¸Šé¢çš„åŸç†,æˆ‘ä»¬å¯ä»¥åœ¨é™æ€æˆå‘˜å‡½æ•°ä¸­å»è°ƒç”¨è¿™ä¸ªç±»çš„éé™æ€æˆå‘˜å‡½æ•°ã€‚ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨cä»£ç ä¸­é—´æ¥çš„å»è°ƒç”¨éé™æ€æˆå‘˜å‡½æ•°ã€‚</p><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/call_tree-ddeb964ee92a28827b5e886cfb26a97db4b318657ba37a5d71a5e3b81e0ee228.png" alt="call_tree"></p><p>ä½†æ˜¯è¦å‘åšçš„è¿™ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è§£å†³çš„æ˜¯å¦‚ä½•åœ¨é™æ€æˆå‘˜å‡½æ•°ä¸­å»è°ƒç”¨éé™æ€æˆå‘˜ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨ç±»çš„é™æ€æˆå‘˜ä¸­èƒ½è®¿é—®åˆ°<code>this</code>æŒ‡é’ˆï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½è°ƒç”¨éé™æ€æˆå‘˜å‡½æ•°ã€‚</p><p>ä½†æ˜¯ä¸Šé¢è¯´è¿‡é™æ€æˆå‘˜å‡½æ•°ä¸å’Œä»»æ„ä¸€ä¸ªç±»å®ä¾‹å¯¹è±¡ç»‘å®šã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ— æ³•åœ¨ç±»é™æ€æˆå‘˜å‡½æ•°ä¸­ç›´æ¥è·å–åˆ°<code>this</code>æŒ‡é’ˆï¼Œè¿™æ˜¯ä¸æ˜¯æ„å‘³ç€è¿™ä¸ªæ–¹æ¡ˆæ­»è·¯ä¸€æ¡ï¼Ÿåˆ«æ€¥ï¼Œæˆ‘ä»¬ä»c++è¯­è¨€å±‚é¢ç¡®å®æ— æ³•è§£å†³ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä»æ±‡ç¼–ä»£ç å…¥æ‰‹ã€‚è¦ç¡®ä¿åœ¨ç±»é™æ€æˆå‘˜å‡½æ•°ä¸­è·å–åˆ°<code>this</code>æŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰å…ˆæŠŠ<code>this</code>æŒ‡é’ˆä¿å­˜åˆ°å¯„å­˜å™¨ã€‚ç„¶åæˆ‘ä»¬å†å‡½æ•°å†…éƒ¨ä½¿ç”¨å†…è”æ±‡ç¼–çš„æ–¹å¼å†ä»è¿™ä¸ªå¯„å­˜å™¨æ‹¿åˆ°<code>this</code>æŒ‡é’ˆã€‚æ•´ä¸ªè¿‡ç¨‹çš„ä¼ªä»£ç å¦‚ä¸‹:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">static_received</span><span class="params">(<span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span>* this_obj = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">  obj = <span class="built_in">get_this_obj_from_register</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;Demo*&gt;(this_obj)-&gt;<span class="built_in">say</span>(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è€ƒè™‘åˆ°ä¸‹é¢çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸€ä¸ªcåº“ä»£ç &lt;code&gt;lib.c&lt;/code&gt;,é‡Œé¢æœ‰ä¸ªå‡½æ•°å«&lt;code&gt;subscribe&lt;/code&gt;,å®ƒæ¥å—ä¸€ä¸ªcallbackå‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;</summary>
      
    
    
    
    
    <category term="c" scheme="http://narutohinata.github.io/tags/c/"/>
    
    <category term="c++" scheme="http://narutohinata.github.io/tags/c/"/>
    
  </entry>
  
  <entry>
    <title>ç§‘é‡ŒåŒ–</title>
    <link href="http://narutohinata.github.io/2022/01/03/%E7%A7%91%E9%87%8C%E5%8C%96/"/>
    <id>http://narutohinata.github.io/2022/01/03/%E7%A7%91%E9%87%8C%E5%8C%96/</id>
    <published>2022-01-03T00:36:36.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç§‘é‡ŒåŒ–"><a href="#ç§‘é‡ŒåŒ–" class="headerlink" title="ç§‘é‡ŒåŒ–"></a>ç§‘é‡ŒåŒ–</h2><p>ç§‘é‡ŒåŒ–æ˜¯æŠŠæ¥å—å¤šä¸ª<a href="https://zh.wikipedia.org/wiki/åƒæ•¸_(ç¨‹å¼è¨­è¨ˆ">å‚æ•°</a>)çš„<a href="https://zh.wikipedia.org/wiki/å‡½æ•°">å‡½æ•°</a>å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚ä¾‹å¦‚:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> _add = curry(Add);</span><br><span class="line"></span><br><span class="line">_add(<span class="number">10</span>)(<span class="number">20</span>); <span class="comment">//æ­¤æ¬¡ç­‰ä»·äºAdd(10, 20)</span></span><br></pre></td></tr></table></figure><h3 id="å®ç°è‡ªå·±çš„ç§‘é‡ŒåŒ–å‡½æ•°"><a href="#å®ç°è‡ªå·±çš„ç§‘é‡ŒåŒ–å‡½æ•°" class="headerlink" title="å®ç°è‡ªå·±çš„ç§‘é‡ŒåŒ–å‡½æ•°"></a>å®ç°è‡ªå·±çš„ç§‘é‡ŒåŒ–å‡½æ•°</h3><p><img src="https://chromer-blog.oss-cn-shanghai.aliyuncs.com/blog/code-b856e3a4d3390885a667fa79c30bc9750ea4006899fff1bf5930f1321b177f97.png" alt="code"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç§‘é‡ŒåŒ–&quot;&gt;&lt;a href=&quot;#ç§‘é‡ŒåŒ–&quot; class=&quot;headerlink&quot; title=&quot;ç§‘é‡ŒåŒ–&quot;&gt;&lt;/a&gt;ç§‘é‡ŒåŒ–&lt;/h2&gt;&lt;p&gt;ç§‘é‡ŒåŒ–æ˜¯æŠŠæ¥å—å¤šä¸ª&lt;a href=&quot;https://zh.wikipedia.org/wiki/åƒæ•¸_(ç¨‹å¼è¨­è¨ˆ&quot;&gt;å‚æ•°&lt;/a&gt;)çš„</summary>
      
    
    
    
    
    <category term="JavaScript" scheme="http://narutohinata.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºå•¥Redisä½¿ç”¨è·³è¡¨è€Œä¸æ˜¯ä½¿ç”¨çº¢é»‘æ ‘</title>
    <link href="http://narutohinata.github.io/2020/04/28/%E4%B8%BA%E5%95%A5Redis%E4%BD%BF%E7%94%A8%E8%B7%B3%E8%A1%A8%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%BF%E7%94%A8%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
    <id>http://narutohinata.github.io/2020/04/28/%E4%B8%BA%E5%95%A5Redis%E4%BD%BF%E7%94%A8%E8%B7%B3%E8%A1%A8%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%BF%E7%94%A8%E7%BA%A2%E9%BB%91%E6%A0%91/</id>
    <published>2020-04-28T15:57:29.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<p>There are a few reasons:</p><ol><li>They are not very memory intensive. Itâ€™s up to you basically. Changing parameters about the probability of a node to have a given number of levels will make then less memory intensive than btrees.</li><li>A sorted set is often target of many ZRANGE or ZREVRANGE operations, that is, traversing the skip list as a linked list. With this operation the cache locality of skip lists is at least as good as with other kind of balanced trees.</li><li>They are simpler to implement, debug, and so forth. For instance thanks to the skip list simplicity I received a patch (already in Redis master) with augmented skip lists implementing ZRANK in O(log(N)). It required little changes to the code.</li></ol><p>About the Append Only durability &amp; speed, I donâ€™t think it is a good idea to optimize Redis at cost of more code and more complexity for a use case that IMHO should be rare for the Redis target (fsync() at every command). Almost no one is using this feature even with ACID SQL databases, as the performance hint is big anyway.</p><p>About threads: our experience shows that Redis is mostly I/O bound. Iâ€™m using threads to serve things from Virtual Memory. The long term solution to exploit all the cores, assuming your link is so fast that you can saturate a single core, is running multiple instances of Redis (no locks, almost fully scalable linearly with number of cores), and using the â€œRedis Clusterâ€ solution that I plan to develop in the future.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;There are a few reasons:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;They are not very memory intensive. Itâ€™s up to you basically. Changing parameters about the probabi</summary>
      
    
    
    
    
    <category term="Redis" scheme="http://narutohinata.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Golangæ–‡ä»¶æ“ä½œ</title>
    <link href="http://narutohinata.github.io/2020/02/28/Golang%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"/>
    <id>http://narutohinata.github.io/2020/02/28/Golang%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/</id>
    <published>2020-02-28T15:57:29.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨"><a href="#åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨" class="headerlink" title="åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨"></a>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  stat, err := os.Stat(<span class="string">&quot;~/Demo.txt&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;err is&quot;</span>, err)</span><br><span class="line">    <span class="keyword">if</span> os.IsNotExist(err) &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;æ–‡ä»¶ä¸çº¯åœ¨&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;æ–‡ä»¶çº¯åœ¨!&quot;</span>)</span><br><span class="line">    fmt.Println(stat)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶é—´æ‹·è´"><a href="#æ–‡ä»¶é—´æ‹·è´" class="headerlink" title="æ–‡ä»¶é—´æ‹·è´"></a>æ–‡ä»¶é—´æ‹·è´</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;io&quot;</span></span><br><span class="line">  <span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  srcFile, _ := os.OpenFile(<span class="string">&quot;~/in.txt&quot;</span>)</span><br><span class="line">  dstFile, _ := os.OpenFile(<span class="string">&quot;~/out.txt&quot;</span>)</span><br><span class="line">  written, err := io.Copy(dstFile, srcFile)</span><br><span class="line">  <span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;æ‹·è´æˆåŠŸ, å­—èŠ‚æ•°=&quot;</span>, written)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;æ‹·è´å¤±è´¥ï¼Œerr=&quot;</span>,err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¼“å†²å¼æ–‡ä»¶æ‹·è´"><a href="#ç¼“å†²å¼æ–‡ä»¶æ‹·è´" class="headerlink" title="ç¼“å†²å¼æ–‡ä»¶æ‹·è´"></a>ç¼“å†²å¼æ–‡ä»¶æ‹·è´</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bufio&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//æ‰“å¼€æºæ–‡ä»¶</span></span><br><span class="line">srcfile, _ := os.OpenFile(<span class="string">&quot;~/in.txt&quot;</span>, os.O_RDONLY, <span class="number">0666</span>)</span><br><span class="line"><span class="comment">//æ‰“å¼€ç›®æ ‡æ–‡ä»¶</span></span><br><span class="line">dstfile, _ := os.OpenFile(<span class="string">&quot;~/out.txt&quot;</span>, os.O_CREATE|os.O_WRONLY, <span class="number">0666</span>)</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">srcfile.Close()</span><br><span class="line">dstfile.Close()</span><br><span class="line">fmt.Println(<span class="string">&quot;æ–‡ä»¶å·²å…³é—­&quot;</span>)</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">reader := bufio.NewReader(srcfile)</span><br><span class="line">writer := bufio.NewWriter(dstfile)</span><br><span class="line">buffer := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">1024</span>)</span><br><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line">_ , err := reader.Read(buffer)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line"><span class="keyword">if</span> err == io.EOF&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;æºæ–‡ä»¶è¯»å–å®Œæ¯•&quot;</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;error&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">_, err1 := writer.Write(buffer)</span><br><span class="line"><span class="keyword">if</span> err1 != <span class="literal">nil</span>&#123;</span><br><span class="line">fmt.Println(err1)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨&quot;&gt;&lt;a href=&quot;#åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨&quot; class=&quot;headerlink&quot; title=&quot;åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨&quot;&gt;&lt;/a&gt;åˆ¤æ–­æ–‡ä»¶æ˜¯å¦çº¯åœ¨&lt;/h2&gt;&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class</summary>
      
    
    
    
    
    <category term="Golang" scheme="http://narutohinata.github.io/tags/Golang/"/>
    
  </entry>
  
  <entry>
    <title>CommonJSæ˜¯å¦‚ä½•å¤„ç†å¾ªç¯ä¾èµ–çš„</title>
    <link href="http://narutohinata.github.io/2020/01/01/Commonjs%E6%98%AF%E5%A6%82%E6%9E%9C%E5%A4%84%E7%90%86%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84/"/>
    <id>http://narutohinata.github.io/2020/01/01/Commonjs%E6%98%AF%E5%A6%82%E6%9E%9C%E5%A4%84%E7%90%86%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84/</id>
    <published>2020-01-01T13:21:32.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–"><a href="#Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–" class="headerlink" title="Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–"></a>Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–</h2><p>è¦å›ç­”è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å…ˆäº†è§£ä¸‹<code>cjs</code> çš„æ¨¡å—åŠ è½½æµç¨‹ã€‚å½“åŠ è½½ä¸€ä¸ª<code>cjs</code> æ¨¡å—çš„æ—¶å€™ä¼šå…ˆç¼“å­˜æ¨¡å—å¯¹è±¡ <code>Module._cache[filename] = module</code>  ç„¶åå†åŠ è½½æ¨¡å— <code>module.load(filename)</code> ã€‚åŸºäºè¿™ä¸ªæ¨¡å—åŠ è½½æµç¨‹æˆ‘ä»¬åˆ†æä¸‹é¢è¿™ä¸ªå¾ªç¯ä¾èµ–çš„ä»£ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A.js</span></span><br><span class="line"><span class="built_in">exports</span>.name = <span class="string">&quot;A&quot;</span></span><br><span class="line"><span class="keyword">const</span> B = <span class="built_in">require</span>(<span class="string">&quot;B&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(B)</span><br><span class="line"><span class="built_in">exports</span>.data = <span class="string">&quot;Data-A&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// B.js</span></span><br><span class="line"><span class="built_in">exports</span>.name = <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="keyword">const</span> A = <span class="built_in">require</span>(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(A)</span><br><span class="line"><span class="built_in">exports</span>.data = <span class="string">&quot;Data-B&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æ‰§è¡Œ<code>node A.js</code> ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</p><p>é¦–å…ˆç³»ç»Ÿä¼šå…ˆç¼“å­˜Aæ¨¡å—ç„¶ååœ¨åŠ è½½Aæ¨¡å—(ä¹Ÿå°±æ˜¯æ‰§è¡ŒAé‡Œé¢çš„ä»£ç )ï¼Œ ç„¶åå½“Aä»£ç æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œ ç³»ç»Ÿä¼šå»require Bæ¨¡å—ï¼ŒåŒAæ¨¡å—ä¸€æ ·,ç³»ç»Ÿä¹Ÿæ˜¯å…ˆç¼“å­˜Bæ¨¡å— ç„¶ååŠ è½½Bæ¨¡å—ï¼Œå½“Bæ‰§è¡Œåˆ°ç¬¬äºŒè¡Œ<code>const A = require(&quot;A&quot;)</code>çš„æ—¶å€™ ç³»ç»Ÿä¼šå»åŠ è½½Aæ¨¡å—ï¼Œä½†æ­¤æ¬¡æˆ‘ä»¬å‘ç°æ²¡æœ‰ï¼ŸAæ¨¡å—å·²ç»åœ¨ç¼“å­˜ä¸­äº†ï¼Œåªä¸è¿‡è¿™ä¸ªAæ¨¡å—è¿˜æ²¡åŠ è½½å®Œæˆ å¤„äºä¸€ç§éƒ¨åˆ†åŠ è½½çš„çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯Bè¿™é‡Œå¾—åˆ°çš„Aæ˜¯ä¸ªéƒ¨åˆ†å€¼(ä¹Ÿå°±æ˜¯A.jsé‡Œåœ¨require(â€˜Bâ€™)ä¸Šæ–¹exportså‡ºæ¥çš„å€¼ <code>&#123; name: &quot;A&quot; &#125;</code> )ã€‚ç„¶åBæ‰“å°Açš„éƒ¨åˆ†å€¼<code>&#123; name: &quot;A&quot; &#125;</code> ç„¶åæ‰§è¡Œæœ€åä¸€è¡Œä»£ç åï¼Œmodule Bæ¨¡å—åŠ è½½å®Œæ¯•ã€‚æ­¤æ—¶æ‰§è¡Œæƒå›åˆ°æ¨¡å—Aï¼ŒAè¿™é‡Œå¾—åˆ°çš„Bæ˜¯ä¸ªå®Œå…¨åŠ è½½çš„æ¨¡å—<code>&#123; name: &quot;B&quot;, data: &quot;Data-B&quot; &#125;</code> </p><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œcjsçš„æ¨¡å—åŠ è½½æµç¨‹æ˜¯å…ˆç¼“å­˜å†åŠ è½½ã€‚åŸºäºè¿™ä¸ªåŸç†æˆ‘ä»¬å¾ˆå®¹æ˜“å‘ç°ï¼Œå½“å‡ºç°å¾ªç¯ä¾èµ–ï¼Œæˆ‘ä»¬æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªéƒ¨åˆ†åŠ è½½æ¨¡å—çš„éƒ¨åˆ†å€¼ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–&quot;&gt;&lt;a href=&quot;#Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–&quot; class=&quot;headerlink&quot; title=&quot;Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–&quot;&gt;&lt;/a&gt;Commonjsæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–&lt;/h2&gt;&lt;p&gt;è¦å›ç­”è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å…ˆ</summary>
      
    
    
    
    
    <category term="commonjs" scheme="http://narutohinata.github.io/tags/commonjs/"/>
    
  </entry>
  
  <entry>
    <title>Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼</title>
    <link href="http://narutohinata.github.io/2019/03/03/Dom%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%BD%E9%AB%98%E8%AE%A1%E7%AE%97%E5%80%BC/"/>
    <id>http://narutohinata.github.io/2019/03/03/Dom%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%BD%E9%AB%98%E8%AE%A1%E7%AE%97%E5%80%BC/</id>
    <published>2019-03-03T14:45:41.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼"><a href="#Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼" class="headerlink" title="Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼"></a>Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼</h1><h2 id="HTMLElement-offsetWidth-Height"><a href="#HTMLElement-offsetWidth-Height" class="headerlink" title="HTMLElement.offsetWidth/Height"></a>HTMLElement.offsetWidth/Height</h2><p><code>HTMLElement.offsetWidth/Hight</code> æ˜¯ä¸€ä¸ªåªè¯»å±æ€§,  è¿”å›ä¸€ä¸ªå…ƒç´ çš„å¸ƒå±€å®½åº¦/é«˜åº¦ã€‚ä¸€èˆ¬æ¥è¯´(å„ä¸ªæµè§ˆå™¨çš„å®ç°å¯èƒ½ä¸ä¸€è‡´) offsetWidth/Heightæ˜¯æµ‹é‡åŒ…å«å…ƒç´ çš„è¾¹æ¡†(border)ã€å†…è¾¹è·(padding)ã€æ»šåŠ¨æ¡(scrollbar)ã€ä»¥åŠCSSè®¾ç½®çš„sizeå€¼ã€‚</p><ul><li>offsetWidth = content.width + paddingLeft + paddingRight + borderLeft + borderRight + verticalScrollbarWidth</li><li>offsetHeight = content.width + paddingTop + paddingBottom + borderTop + borderBottom + horizontalScrollbarWidth</li></ul><h2 id="Element-clientWidth-Height"><a href="#Element-clientWidth-Height" class="headerlink" title="Element.clientWidth/Height"></a>Element.clientWidth/Height</h2><p><code>Element.clientWidth/Element.clientHeight</code> å±æ€§è¡¨ç¤ºä¸€ä¸ªå…ƒç´ çš„å†…éƒ¨å®½åº¦/é«˜åº¦ã€‚è¯¥å±æ€§åŒ…å«å†…è¾¹è·padding,ä½†æ˜¯ä¸åŒ…å«è¾¹æ¡†borderã€å¤–è¾¹è·marginä»¥åŠæ»šåŠ¨æ¡ã€‚ ä¹Ÿå°±æ˜¯è¯´:</p><ul><li>Element.clientWidth = contentWidth + paddingLeft + paddingRight</li><li>Element.clientHeight = contentHeight + paddingTop + paddingBottom</li></ul><p>å€¼å¾—æ³¨æ„çš„æ˜¯å†…è”å…ƒç´ (inline element)ä»¥åŠæ²¡æœ‰cssæ ·å¼çš„åŸå§‹çš„clientWidth/clientHeightçš„å±æ€§å€¼ä¸º0</p><h2 id="Element-scrollWidth-Height"><a href="#Element-scrollWidth-Height" class="headerlink" title="Element.scrollWidth/Height"></a>Element.scrollWidth/Height</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼&quot;&gt;&lt;a href=&quot;#Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼&quot; class=&quot;headerlink&quot; title=&quot;Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼&quot;&gt;&lt;/a&gt;Domå…ƒç´ çš„ä¸€äº›å®½é«˜è®¡ç®—å€¼&lt;/h1&gt;&lt;h2 id=&quot;HTMLElement-offsetWid</summary>
      
    
    
    
    
    <category term="css" scheme="http://narutohinata.github.io/tags/css/"/>
    
    <category term="dom" scheme="http://narutohinata.github.io/tags/dom/"/>
    
  </entry>
  
  <entry>
    <title>Rå¤§åšå®¢é‡Œå¯¹é—­åŒ…çš„è§£é‡Šã€è½¬ã€‘</title>
    <link href="http://narutohinata.github.io/2018/06/08/R%E5%A4%A7%E5%8D%9A%E5%AE%A2%E9%87%8C%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E8%A7%A3%E9%87%8A%E3%80%90%E8%BD%AC%E3%80%91/"/>
    <id>http://narutohinata.github.io/2018/06/08/R%E5%A4%A7%E5%8D%9A%E5%AE%A2%E9%87%8C%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E8%A7%A3%E9%87%8A%E3%80%90%E8%BD%AC%E3%80%91/</id>
    <published>2018-06-08T11:27:49.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="http://rednaxelafx.iteye.com/blog/245022">è½¬è‡ª RednaxelaFX åšå®¢è¯„è®º</a></p></blockquote><p>æˆ‘ä¸ç†è§£ä½ ä¸ç†è§£çš„æ˜¯ä»€ä¹ˆâ€¦â€¦<code>é—­åŒ…</code>çš„å®šä¹‰å¾ˆå¥½ç†è§£æ’’ã€‚è¦ç‚¹æœ‰ä¿©ï¼š </p><ol><li>ä¸€ä¸ªå«æœ‰<code>è‡ªç”±å˜é‡</code>çš„<code>å‡½æ•°</code>ï¼› </li><li>è¿™äº›è‡ªç”±å˜é‡æ‰€åœ¨çš„<code>ç¯å¢ƒ</code>ã€‚</li></ol><p>å¤–éƒ¨ç¯å¢ƒæŒæœ‰å†…éƒ¨å‡½æ•°æ‰€ä½¿ç”¨çš„è‡ªç”±å˜é‡ï¼Œå¯¹å†…éƒ¨å‡½æ•°å½¢æˆâ€œé—­åŒ…â€ï¼Œå°±è¿™æ ·â€¦â€¦ ç®€å•ä½†ä¸ä¸¥æ ¼çš„è¯´ï¼Œä¸€ä¸ªå‡½æ•°çš„â€œ<code>è‡ªç”±å˜é‡</code>â€å°±æ˜¯æ—¢ä¸æ˜¯å‚æ•°ä¹Ÿä¸æ˜¯å±€éƒ¨å˜é‡çš„å˜é‡ã€‚ </p><span id="more"></span><p>ä¸€ä¸ªçº¯ç²¹ï¼ˆæ— å‰¯ä½œç”¨)çš„å‡½æ•°å¦‚æœä¸å«æœ‰è‡ªç”±å˜é‡ï¼Œé‚£ä¹ˆæ¯æ¬¡ç”¨ç›¸åŒçš„å‚æ•°è°ƒç”¨åçš„å¾—åˆ°çš„ç»“æœè‚¯å®šæ˜¯ä¸€æ ·çš„ã€‚ä½†å¦‚æœä¸€ä¸ªå‡½æ•°å«æœ‰è‡ªç”±å˜é‡ï¼Œé‚£ä¹ˆè°ƒç”¨è¿”å›çš„ç»“æœä¸ä½†ä¾èµ–äºå‚æ•°çš„å€¼ï¼Œè¿˜ä¾èµ–äºè‡ªç”±å˜é‡çš„å€¼ã€‚å› æ­¤ä¸€ä¸ªå«æœ‰è‡ªç”±å˜é‡çš„å‡½æ•°è¦æ­£ç¡®æ‰§è¡Œï¼Œå¿…é¡»ä¿è¯å…¶æ‰€ä¾èµ–çš„å¤–å›´ç¯å¢ƒçš„å­˜åœ¨ã€‚ </p><p>åŸºäºç±»çš„é¢å‘å¯¹è±¡ç¨‹åºè¯­è¨€ä¸­æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯æ–¹æ³•æ˜¯ç”¨çš„è‡ªç”±å˜é‡æ˜¯æ¥è‡ªå…¶æ‰€åœ¨çš„ç±»çš„å®ä¾‹çš„ã€‚åƒè¿™æ ·ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;  </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">AddWith</span><span class="params">( <span class="keyword">int</span> y )</span> </span>&#123; <span class="keyword">return</span> x + y; &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·çš„<code>AddWith()</code>æœ‰ä¸€ä¸ª<code>å‚æ•°y</code>å’Œä¸€ä¸ª<code>è‡ªç”±å˜é‡x</code>ï¼Œå…¶è¿”å›çš„å€¼æ—¢ä¾èµ–äºå‚æ•°çš„å€¼ä¹Ÿä¾èµ–äºè‡ªç”±å˜é‡çš„å€¼ã€‚ä¸ºäº†è®©<code>AddWith()</code>æ­£ç¡®å·¥ä½œï¼Œå®ƒå¿…é¡»ä¾é™„äº<code>Foo</code>çš„ä¸€ä¸ªå®ä¾‹ï¼Œä¸ç„¶å°±å¾—ä¸åˆ°xçš„å€¼äº†ï¼ˆç§°ä¸ºï¼šâ€œå˜é‡iæœªä¸å€¼ç›¸ç»‘å®šâ€ï¼‰ã€‚å¾ˆå¥½ç†è§£å¯¹å§ã€‚ä¸è¿‡é¢å‘å¯¹è±¡çš„è¯­è¨€é‡Œä¸€èˆ¬ä¸æŠŠç±»ç§°ä¸ºé—­åŒ…ï¼Œæ²¡ä¸ºä»€ä¹ˆï¼Œå°±æ˜¯ç§ä¹ æƒ¯ã€‚<br>å½“ç„¶ä¸¥æ ¼æ¥è¯´æ–¹æ³•æ‰€æ•è·çš„è‡ªç”±å˜é‡ä¸æ˜¯iï¼Œè€Œæ˜¯<code>this</code>ï¼›xæ˜¯é€šè¿‡thisæ¥è®¿é—®åˆ°çš„ï¼Œå®Œæ•´å†™å‡ºåº”è¯¥æ˜¯<code>this.x</code>ã€‚ </p><p>å¦‚æœè¿™ä¸ªâ€œ<code>å¤–å›´ç¯å¢ƒ</code>â€æ¥è‡ªä¸€ä¸ª<code>å¤–å›´å‡½æ•°</code>ï¼Œå¹¶ä¸”å†…éƒ¨å‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œé‚£ä¹ˆå¤–å›´å‡½æ•°çš„å±€éƒ¨ç¯å¢ƒå°±ä¸èƒ½åœ¨è°ƒç”¨ç»“æŸæ—¶å°±æ’¤é”€ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AddWith</span>(<span class="params">x</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">y</span>) </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> x + y  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></p><p>è¿™æ ·çš„å†…éƒ¨å‡½æ•°æœ‰ä¸€ä¸ª<code>å‚æ•°y</code>å’Œä¸€ä¸ª<code>è‡ªç”±å˜é‡x</code>ã€‚xåœ¨å¤–å›´å‡½æ•°<code>AddWith()</code>é‡Œæ˜¯ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªâ€œ<code>å·²ç»‘å®šäº†å€¼çš„å˜é‡</code>â€ï¼ˆbound variableï¼‰ã€‚<code>AddWith()</code>çš„å±€éƒ¨ä½œç”¨åŸŸä¸­å«æœ‰å†…éƒ¨å‡½æ•°æ‰€ä½¿ç”¨çš„è‡ªç”±å˜é‡ï¼Œå¯¹å†…éƒ¨å‡½æ•°å½¢æˆé—­åŒ…ã€‚ä¸ºäº†è®©è¿”å›å‡ºå»çš„å†…éƒ¨å‡½æ•°èƒ½æ­£å¸¸å·¥ä½œï¼Œè¿™ä¸ªå†…éƒ¨å‡½æ•°å¿…é¡»ä¾é™„äºä¸€ä¸ªèƒ½æä¾›xçš„å€¼çš„ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯<code>AddWith()</code>æä¾›çš„é—­åŒ…ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addFive = AddWith(<span class="number">5</span>)  </span><br><span class="line"><span class="keyword">var</span> seven = addFive(<span class="number">2</span>) <span class="comment">// 2+5=7  </span></span><br></pre></td></tr></table></figure></p><p>å…¨å±€å˜é‡æ˜¯ä¸€ç§ç‰¹æ®Šçš„è‡ªç”±å˜é‡ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://rednaxelafx.iteye.com/blog/245022&quot;&gt;è½¬è‡ª RednaxelaFX åšå®¢è¯„è®º&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ä¸ç†è§£ä½ ä¸ç†è§£çš„æ˜¯ä»€ä¹ˆâ€¦â€¦&lt;code&gt;é—­åŒ…&lt;/code&gt;çš„å®šä¹‰å¾ˆå¥½ç†è§£æ’’ã€‚è¦ç‚¹æœ‰ä¿©ï¼š &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€ä¸ªå«æœ‰&lt;code&gt;è‡ªç”±å˜é‡&lt;/code&gt;çš„&lt;code&gt;å‡½æ•°&lt;/code&gt;ï¼› &lt;/li&gt;
&lt;li&gt;è¿™äº›è‡ªç”±å˜é‡æ‰€åœ¨çš„&lt;code&gt;ç¯å¢ƒ&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¤–éƒ¨ç¯å¢ƒæŒæœ‰å†…éƒ¨å‡½æ•°æ‰€ä½¿ç”¨çš„è‡ªç”±å˜é‡ï¼Œå¯¹å†…éƒ¨å‡½æ•°å½¢æˆâ€œé—­åŒ…â€ï¼Œå°±è¿™æ ·â€¦â€¦ ç®€å•ä½†ä¸ä¸¥æ ¼çš„è¯´ï¼Œä¸€ä¸ªå‡½æ•°çš„â€œ&lt;code&gt;è‡ªç”±å˜é‡&lt;/code&gt;â€å°±æ˜¯æ—¢ä¸æ˜¯å‚æ•°ä¹Ÿä¸æ˜¯å±€éƒ¨å˜é‡çš„å˜é‡ã€‚ &lt;/p&gt;</summary>
    
    
    
    
    <category term="è½¬è½½ é—­åŒ…" scheme="http://narutohinata.github.io/tags/%E8%BD%AC%E8%BD%BD-%E9%97%AD%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>javascriptå„æ’åºç®—æ³•å®ç°</title>
    <link href="http://narutohinata.github.io/2018/06/06/javascript%E5%90%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/"/>
    <id>http://narutohinata.github.io/2018/06/06/javascript%E5%90%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/</id>
    <published>2018-06-06T11:14:34.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<ol><li>å†’æ³¡æ’åº(æ™®é€šç‰ˆ)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubble_sort</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = data.length - <span class="number">1</span>; i &gt; <span class="number">0</span> ; i-- )&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[j] &gt; data[j+<span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">let</span> tmp = data[j+<span class="number">1</span>];</span><br><span class="line">        data[j+<span class="number">1</span>] = data[j];</span><br><span class="line">        data[j] = tmp;</span><br><span class="line">      &#125;      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å†’æ³¡æ’åºï¼ˆæ”¹è‰¯ç‰ˆ1)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubble_sort1</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = data.length - <span class="number">1</span>; i &gt; <span class="number">0</span> ; i-- )&#123;</span><br><span class="line">    <span class="keyword">let</span> tag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[j] &gt; data[j+<span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">let</span> tmp = data[j+<span class="number">1</span>];</span><br><span class="line">        data[j+<span class="number">1</span>] = data[j];</span><br><span class="line">        data[j] = tmp;</span><br><span class="line">        tag = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tag) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>è¿™é‡Œè¯´ä¸‹æ”¹è‰¯ç‰ˆçš„æ€è·¯ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬æ²¡æœ‰è®°å½•ä¸Šä¸€è¶Ÿå†’æ³¡çš„æ’åºçŠ¶æ€ï¼Œå¯¼è‡´å¿…é¡»æ‰§è¡Œ<code>n-1</code>è¶Ÿæ’åºã€‚è€ƒè™‘æœ€å¥½çš„æƒ…å†µï¼Œå¦‚æœä¸€å¼€å§‹åºåˆ—å°±æ˜¯æœ‰åºçš„ï¼Œå¦‚æœä½¿ç”¨ç¬¬ä¸€ç§æ’åºçš„è¯ï¼Œå¯¼è‡´å¯ä»¥<code>O(n)</code>çš„è§£å†³çš„é—®é¢˜èŠ±äº†<code>O(n^2)</code>çš„æ—¶é—´äº†ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ï¼Œäºæ˜¯æˆ‘ä»¬åœ¨æ¯ä¸€è¶Ÿæ’åºå¼€å§‹å‰ï¼Œè®¾ç½®ä¸€ä¸ªè¡¨ç¤ºåºåˆ—æ˜¯å¦æœ‰åºçš„çŠ¶æ€é‡(<code>let tag</code>)ï¼Œå¹¶è®¤ä¸ºä¸€å¼€å§‹æ˜¯æœ‰åºçš„(<code>true</code>)ï¼Œç„¶ååœ¨äº¤æ¢æ’åºè¿‡ç¨‹ä¸­ä¸€æ—¦å‘ç”Ÿäº†äº¤æ¢å°±æŠŠçŠ¶æ€é‡è®¾ç½®ä¸ºæ— åºçŠ¶æ€ï¼ˆ<code>false</code>)ã€‚ç„¶ååœ¨è¿›è¡Œä¸‹ä¸€è¶Ÿæ’åºçš„æ—¶å€™æ£€æŸ¥è¿™ä¸ªçŠ¶æ€é‡ï¼Œå¦‚æœæ˜¯<code>true</code>åˆ™è¯´æ˜åºåˆ—æ­¤æ—¶å·²ç»æœ‰åºæ— éœ€è¿›è¡Œä¸‹ä¸€è¶Ÿäº†ç›´æ¥è¿”å›å°±è¡Œäº†ï¼Œå¦‚æœä¸º<code>false</code>åˆ™è¡¨ç¤ºåºåˆ—æ­¤æ—¶è¿˜æ˜¯æ— åºçŠ¶æ€åˆ™éœ€è¦è¿›è¡Œä¸‹ä¸€è¶Ÿæ’åºã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;å†’æ³¡æ’åº(æ™®é€šç‰ˆ)&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;</summary>
      
    
    
    
    <category term="javascript" scheme="http://narutohinata.github.io/categories/javascript/"/>
    
    
    <category term="ç®—æ³•" scheme="http://narutohinata.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Rè¯­è¨€è¯­æ³•ã€ä¸€ã€‘</title>
    <link href="http://narutohinata.github.io/2018/05/08/R%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E3%80%90%E4%B8%80%E3%80%91/"/>
    <id>http://narutohinata.github.io/2018/05/08/R%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E3%80%90%E4%B8%80%E3%80%91/</id>
    <published>2018-05-08T20:14:18.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èµ‹å€¼è¯­æ³•"><a href="#èµ‹å€¼è¯­æ³•" class="headerlink" title="èµ‹å€¼è¯­æ³•"></a>èµ‹å€¼è¯­æ³•</h1><p>åœ¨Rè¯­è¨€ä¸­èµ‹å€¼ä½¿ç”¨<code>&lt;-</code>,æ¯”å¦‚ä¸‹é¢æŠŠ10èµ‹å€¼ç»™å˜é‡a:<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a&lt;-<span class="number">10</span></span><br></pre></td></tr></table></figure><br><span id="more"></span></p><h1 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h1>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;èµ‹å€¼è¯­æ³•&quot;&gt;&lt;a href=&quot;#èµ‹å€¼è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;èµ‹å€¼è¯­æ³•&quot;&gt;&lt;/a&gt;èµ‹å€¼è¯­æ³•&lt;/h1&gt;&lt;p&gt;åœ¨Rè¯­è¨€ä¸­èµ‹å€¼ä½¿ç”¨&lt;code&gt;&amp;lt;-&lt;/code&gt;,æ¯”å¦‚ä¸‹é¢æŠŠ10èµ‹å€¼ç»™å˜é‡a:&lt;br&gt;&lt;figure class=&quot;highlight r&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;a&amp;lt;-&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;</summary>
    
    
    
    
    <category term="Rè¯­è¨€" scheme="http://narutohinata.github.io/tags/R%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>Nodejsä»£ç ç‰‡æ®µ</title>
    <link href="http://narutohinata.github.io/2018/05/08/Nodejs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"/>
    <id>http://narutohinata.github.io/2018/05/08/Nodejs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/</id>
    <published>2018-05-08T17:38:24.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Nodejs-Base64ç¼–ç å’Œè§£ç "><a href="#Nodejs-Base64ç¼–ç å’Œè§£ç " class="headerlink" title="Nodejs Base64ç¼–ç å’Œè§£ç "></a>Nodejs <code>Base64</code>ç¼–ç å’Œè§£ç </h1><ol><li><p>Base64ç¼–ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;æˆ‘çˆ±js&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> decode_str = Buffer.from(str).toString(<span class="string">&#x27;base64&#x27;</span>) <span class="comment">// &gt; &#x27;5oiR54ixanM=&#x27;</span></span><br><span class="line"><span class="comment">// æˆ–è€…è¿™æ ·ï¼šnew Buffer(str).toString(&#x27;base64&#x27;) ã€å·²å¼ƒç”¨ã€‘</span></span><br></pre></td></tr></table></figure></li><li><p>Base64è§£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> decode_str = <span class="string">&#x27;5oiR54ixanM=&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str = Buffer.from(decode_str, <span class="string">&#x27;base64&#x27;</span>).toString() <span class="comment">// &gt; æˆ‘çˆ±js</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Nodejs-Base64ç¼–ç å’Œè§£ç &quot;&gt;&lt;a href=&quot;#Nodejs-Base64ç¼–ç å’Œè§£ç &quot; class=&quot;headerlink&quot; title=&quot;Nodejs Base64ç¼–ç å’Œè§£ç &quot;&gt;&lt;/a&gt;Nodejs &lt;code&gt;Base64&lt;/code&gt;ç¼–ç å’Œè§£ç &lt;</summary>
      
    
    
    
    
    <category term="Nodejs ä»£ç ç‰‡æ®µ Tips" scheme="http://narutohinata.github.io/tags/Nodejs-%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5-Tips/"/>
    
  </entry>
  
  <entry>
    <title>mongodbä¸‹n:må…³ç³»</title>
    <link href="http://narutohinata.github.io/2018/04/29/mongodb%E4%B8%8Bn-m%E5%85%B3%E7%B3%BB/"/>
    <id>http://narutohinata.github.io/2018/04/29/mongodb%E4%B8%8Bn-m%E5%85%B3%E7%B3%BB/</id>
    <published>2018-04-29T10:46:39.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç”¨æˆ·å…³æ³¨ç³»ç»Ÿä¸­å…³æ³¨äººå’Œè¢«å…³æ³¨äººæ˜¯<code>å¤šå¯¹å¤šå…³ç³»</code>,åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­æˆ‘ä»¬å¾ˆå®¹æ˜“é€šè¿‡ä¸­é—´è¡¨å…³è”å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚å…³æ³¨å’Œå–æ¶ˆå…³æ³¨æ— éå°±æ˜¯å¯¹è¿™ä¸ªä¸­é—´è¡¨çš„è®°å½•çš„å¢åŠ å’Œåˆ é™¤ã€‚é‚£ä¹ˆåœ¨<code>mongodb</code>ä¸­å¦‚ä½•å®ç°è¿™ç§å¤šå¯¹å¤šå…³ç³»å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“<code>å…³æ³¨æ“ä½œ</code>å°±æ˜¯<code>è¢«å…³æ³¨æ“ä½œ</code>çš„é€†æ“ä½œï¼Œå½“ç”¨æˆ·<code>A</code>å…³æ³¨ç”¨æˆ·<code>B</code>çš„æ—¶å€™,ä¹Ÿå°±æ˜¯ç”¨æˆ·<code>B</code>è¢«ç”¨æˆ·<code>A</code>å…³æ³¨äº†ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·æ–‡æ¡£ä¸­ç»´æŠ¤ä¸€ä¸ªç”¨æˆ·å…³æ³¨çš„ç”¨æˆ·é›†åˆ<code>followings</code>:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">  <span class="attr">followings</span>: [ObjectId]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;B&#x27;</span>,</span><br><span class="line">  <span class="attr">followings</span>: [ObjectId]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><span id="more"></span><ol><li>é‚£ä¹ˆç”¨æˆ·<code>A</code>å…³æ³¨çš„<code>B</code>çš„æ“ä½œæˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆå†™äº†:<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = db.users.findOne(&#123; <span class="attr">username</span>: <span class="string">&#x27;B&#x27;</span> &#125;);</span><br><span class="line">db.users.updateOne(</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">&#x27;A&#x27;</span> &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">$push</span>: &#123; <span class="attr">followings</span>: b._id &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></li><li>é‚£ä¹ˆç”¨æˆ·<code>A</code>å–æ¶ˆå…³æ³¨çš„<code>B</code>çš„æ“ä½œæˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆå†™äº†:<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = db.users.findOne(&#123; <span class="attr">username</span>: <span class="string">&#x27;B&#x27;</span> &#125;);</span><br><span class="line">db.users.updateOne(</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">&#x27;A&#x27;</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">$pull</span>: &#123; <span class="attr">followings</span>: b._id &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ç”¨æˆ·å…³æ³¨ç³»ç»Ÿä¸­å…³æ³¨äººå’Œè¢«å…³æ³¨äººæ˜¯&lt;code&gt;å¤šå¯¹å¤šå…³ç³»&lt;/code&gt;,åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­æˆ‘ä»¬å¾ˆå®¹æ˜“é€šè¿‡ä¸­é—´è¡¨å…³è”å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚å…³æ³¨å’Œå–æ¶ˆå…³æ³¨æ— éå°±æ˜¯å¯¹è¿™ä¸ªä¸­é—´è¡¨çš„è®°å½•çš„å¢åŠ å’Œåˆ é™¤ã€‚é‚£ä¹ˆåœ¨&lt;code&gt;mongodb&lt;/code&gt;ä¸­å¦‚ä½•å®ç°è¿™ç§å¤šå¯¹å¤šå…³ç³»å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“&lt;code&gt;å…³æ³¨æ“ä½œ&lt;/code&gt;å°±æ˜¯&lt;code&gt;è¢«å…³æ³¨æ“ä½œ&lt;/code&gt;çš„é€†æ“ä½œï¼Œå½“ç”¨æˆ·&lt;code&gt;A&lt;/code&gt;å…³æ³¨ç”¨æˆ·&lt;code&gt;B&lt;/code&gt;çš„æ—¶å€™,ä¹Ÿå°±æ˜¯ç”¨æˆ·&lt;code&gt;B&lt;/code&gt;è¢«ç”¨æˆ·&lt;code&gt;A&lt;/code&gt;å…³æ³¨äº†ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·æ–‡æ¡£ä¸­ç»´æŠ¤ä¸€ä¸ªç”¨æˆ·å…³æ³¨çš„ç”¨æˆ·é›†åˆ&lt;code&gt;followings&lt;/code&gt;:&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;username&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;#x27;A&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;followings&lt;/span&gt;: [ObjectId]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;username&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;#x27;B&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;followings&lt;/span&gt;: [ObjectId]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="mongodb" scheme="http://narutohinata.github.io/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„ä»£ç å°ç‰‡æ®µ</title>
    <link href="http://narutohinata.github.io/2018/04/28/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%89%87%E6%AE%B5/"/>
    <id>http://narutohinata.github.io/2018/04/28/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%89%87%E6%AE%B5/</id>
    <published>2018-04-28T15:57:29.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<ol><li>è·å–cookie<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cookies = <span class="built_in">document</span>.cookie;</span><br><span class="line">  <span class="keyword">let</span> _cookies = cookies.split(<span class="string">&quot;;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> _cookies.reduce(<span class="function">(<span class="params">a, cookie</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> _cookie = cookie.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.assign(a, &#123; [_cookie[<span class="number">0</span>]]: _cookie[<span class="number">1</span>]&#125;);</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><span id="more"></span></li><li><p>æ·±æ‹·è´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> deep_clone = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> clonedObj;</span><br><span class="line">  <span class="comment">// Handle null or undefine or primitive type</span></span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span> || <span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Handle Array</span></span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">    clonedObj = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; obj.length; index++) &#123;</span><br><span class="line">      clonedObj[index] = deep_clone(obj[index]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> clonedObj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Handle Date</span></span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Date</span>) &#123;</span><br><span class="line">    clonedObj = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    clonedObj.setDate(obj.getDate());</span><br><span class="line">    <span class="keyword">return</span> clonedObj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Handle Object</span></span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">    clonedObj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">        clonedObj[key] = deep_clone(obj[key]);</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> clonedObj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;cannot clone this&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¿»è½¬æ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¿»è½¬æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverse</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = arr || [];</span><br><span class="line">  <span class="keyword">if</span> (arr.length === <span class="number">0</span>) <span class="keyword">return</span> [];</span><br><span class="line">  <span class="keyword">var</span> temp_arr = copy_array(arr);</span><br><span class="line">  <span class="keyword">var</span> length = temp_arr.length;</span><br><span class="line">  <span class="keyword">var</span> index = length,</span><br><span class="line">      new_index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(--index &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> value = temp_arr[index];</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    arr[new_index++] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹·è´æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy_array</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!(arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;argument is not array&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (arr.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> index = -<span class="number">1</span>,</span><br><span class="line">      length = arr.length,</span><br><span class="line">      resIndex = <span class="number">0</span>,</span><br><span class="line">      result = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(++index &lt; length) &#123;</span><br><span class="line">    <span class="keyword">var</span> value = arr[index];</span><br><span class="line">    result[resIndex++] = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;ol&gt;
&lt;li&gt;è·å–cookie&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getCookie&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; cookies = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.cookie;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; _cookies = cookies.split(&lt;span class=&quot;string&quot;&gt;&amp;quot;;&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; _cookies.reduce(&lt;span class=&quot;function&quot;&gt;(&lt;span class=&quot;params&quot;&gt;a, cookie&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; _cookie = cookie.split(&lt;span class=&quot;string&quot;&gt;&amp;quot;=&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(a, &amp;#123; [_cookie[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]]: _cookie[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;, &amp;#123;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>MongoDBä¸­çš„1:må…³ç³»</title>
    <link href="http://narutohinata.github.io/2018/04/28/MongoDB%E4%B8%AD%E7%9A%841:m%E5%85%B3%E7%B3%BB/"/>
    <id>http://narutohinata.github.io/2018/04/28/MongoDB%E4%B8%AD%E7%9A%841:m%E5%85%B3%E7%B3%BB/</id>
    <published>2018-04-28T13:15:05.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨åšå®¢ç³»ç»Ÿä¸­ç”¨æˆ·(user)å’Œåšæ–‡(post)æ˜¯1å¯¹å¤šå…³ç³»,åœ¨mongodbä¸­æˆ‘ä»¬æ€ä¹ˆè¡¨è¿°è¿™ç§å…³ç³»å‘¢ï¼Ÿåœ¨mongoä¸­æˆ‘ä»¬å¯ä»¥åˆ©ç”¨åœ¨å¤šç«¯ä¿å­˜1ç«¯çš„<code>ObjectId</code>æ¥ç»´æŒè¿™ç§<code>1:m</code>å…³ç³»,ä¸‹é¢åˆ†åˆ«åˆ—å‡º<code>user</code>å’Œ<code>post</code>çš„ç»“æ„:</p><ol><li><code>user</code>çš„ç»“æ„<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span> : ObjectId(<span class="string">&quot;5ae3caa35ece85125d2429f7&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;username&quot;</span> : <span class="string">&quot;ç™¾æ€å¯ä¹1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;age&quot;</span> : <span class="number">21</span>,</span><br><span class="line">    <span class="attr">&quot;updateAt&quot;</span> : ISODate(<span class="string">&quot;2018-04-28T01:11:54.698Z&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;createdAt&quot;</span> : ISODate(<span class="string">&quot;2018-04-28T01:11:54.698Z&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;__v&quot;</span> : <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><span id="more"></span><ol><li><code>post</code>çš„ç»“æ„<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span> : ObjectId(<span class="string">&quot;5ae3384594aa810f8d17f073&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;title&quot;</span> : <span class="string">&quot;ruby&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span> : <span class="string">&quot;sdasda&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;author&quot;</span> : ObjectId(<span class="string">&quot;5ae3caa35ece85125d2429f7&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;__v&quot;</span> : <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p>ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨<code>post</code>documenté‡Œæ·»åŠ ä¸ªä¸€ä¸ª<code>author</code>çš„å­—æ®µé‡Œé¢ä¿å­˜äº†<code>user</code>çš„<code>ObjectId</code>.</p><p>äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œä¸‹é¢è¿™äº›æ“ä½œäº†:</p><ol><li><p>æŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·å‘å¸ƒçš„æ‰€æœ‰æ–‡ç« </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = db.user.findOne();</span><br><span class="line"><span class="keyword">var</span> posts = db.post.find(&#123;<span class="attr">author</span>: user._id&#125;);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ä¸€ç¯‡æ–‡ç« çš„ä½œè€…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> post = db.post.findOne();</span><br><span class="line"><span class="keyword">var</span> user = db.user.findOne(&#123;<span class="attr">author</span>: post.author &#125;);</span><br></pre></td></tr></table></figure></li><li><p>ç”¨æˆ·åˆ›å»ºæ–‡ç« </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = db.user.findOne();</span><br><span class="line"><span class="keyword">var</span> posts = db.post.insert(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;ruby&quot;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&quot;sdasda&quot;</span>,</span><br><span class="line">    <span class="attr">author</span>: user._id</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨åšå®¢ç³»ç»Ÿä¸­ç”¨æˆ·(user)å’Œåšæ–‡(post)æ˜¯1å¯¹å¤šå…³ç³»,åœ¨mongodbä¸­æˆ‘ä»¬æ€ä¹ˆè¡¨è¿°è¿™ç§å…³ç³»å‘¢ï¼Ÿåœ¨mongoä¸­æˆ‘ä»¬å¯ä»¥åˆ©ç”¨åœ¨å¤šç«¯ä¿å­˜1ç«¯çš„&lt;code&gt;ObjectId&lt;/code&gt;æ¥ç»´æŒè¿™ç§&lt;code&gt;1:m&lt;/code&gt;å…³ç³»,ä¸‹é¢åˆ†åˆ«åˆ—å‡º&lt;code&gt;user&lt;/code&gt;å’Œ&lt;code&gt;post&lt;/code&gt;çš„ç»“æ„:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;user&lt;/code&gt;çš„ç»“æ„&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : ObjectId(&lt;span class=&quot;string&quot;&gt;&amp;quot;5ae3caa35ece85125d2429f7&amp;quot;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;username&amp;quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&amp;quot;ç™¾æ€å¯ä¹1&amp;quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;password&amp;quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&amp;quot;123456&amp;quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;age&amp;quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;21&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;updateAt&amp;quot;&lt;/span&gt; : ISODate(&lt;span class=&quot;string&quot;&gt;&amp;quot;2018-04-28T01:11:54.698Z&amp;quot;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;createdAt&amp;quot;&lt;/span&gt; : ISODate(&lt;span class=&quot;string&quot;&gt;&amp;quot;2018-04-28T01:11:54.698Z&amp;quot;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;__v&amp;quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    
    <category term="mongodb" scheme="http://narutohinata.github.io/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>Nodeæ¨¡å—åˆ—è¡¨</title>
    <link href="http://narutohinata.github.io/2018/04/10/Node%E6%A8%A1%E5%9D%97%E5%88%97%E8%A1%A8/"/>
    <id>http://narutohinata.github.io/2018/04/10/Node%E6%A8%A1%E5%9D%97%E5%88%97%E8%A1%A8/</id>
    <published>2018-04-10T14:42:13.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<ol><li>è¯»å†™Excelæ–‡ä»¶ <a href="https://github.com/guyonroche/exceljs">ExcelJs</a></li><li>æ—¶é—´æ ¼å¼åŒ–å·¥å…· <a href="https://date-fns.org/">date-fns</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;è¯»å†™Excelæ–‡ä»¶ &lt;a href=&quot;https://github.com/guyonroche/exceljs&quot;&gt;ExcelJs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æ—¶é—´æ ¼å¼åŒ–å·¥å…· &lt;a href=&quot;https://date-fns.org/&quot;&gt;date-fns&lt;/a&gt;</summary>
      
    
    
    
    
    <category term="node" scheme="http://narutohinata.github.io/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>javascriptä¸­çš„ç»§æ‰¿</title>
    <link href="http://narutohinata.github.io/2018/04/06/javascript%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF/"/>
    <id>http://narutohinata.github.io/2018/04/06/javascript%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF/</id>
    <published>2018-04-06T20:55:18.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-åŸå‹é“¾"><a href="#1-åŸå‹é“¾" class="headerlink" title="1.åŸå‹é“¾"></a>1.åŸå‹é“¾</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.property = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.property;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.subproperty = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿äº†SuperType</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line"></span><br><span class="line">SubType.prototype.getSubValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.subproperty;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType();</span><br><span class="line">alert(instance.getSuperValue());â€</span><br><span class="line"></span><br><span class="line">æ‘˜å½•æ¥è‡ª: Nicholas C.Zakas. â€œJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬<span class="number">3</span>ç‰ˆï¼‰ã€‚â€ iBooks. </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªæ–¹å¼å®ç°ç»§æ‰¿æœ€å¤§çš„é—®é¢˜å°±æ˜¯åœ¨åŒ…å«å¼•ç”¨ç±»å‹çš„åŸå‹ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œè€Œå¯¼è‡´å­ç±»å‹çš„å®ä¾‹å¯¹è¿™ä¸ªå¼•ç”¨ç±»å‹çš„ä¿®æ”¹å¯ä»¥è¢«å…¶ä»–æ‰€æœ‰å­ç±»å‹çœ‹è§ã€‚ä¾‹å¦‚ï¼š</p></blockquote><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123;            </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿äº†SuperType</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType();</span><br><span class="line">instance1.colors.push(<span class="string">&quot;black&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(instance1.colors);        <span class="comment">//&quot;red,blue,green,black&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType();</span><br><span class="line"><span class="built_in">console</span>.log(instance2.colors);        <span class="comment">//&quot;red,blue,green,blackâ€</span></span><br><span class="line"></span><br><span class="line">æ‘˜å½•æ¥è‡ª: Nicholas C.Zakas. â€œJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬<span class="number">3</span>ç‰ˆï¼‰ã€‚â€ iBooks. </span><br></pre></td></tr></table></figure><p>å­ç±»å‹å®ä¾‹<code>instance2</code>ä¿®æ”¹åº”ç”¨ç±»å‹å±æ€§<code>color</code>,å¯¼è‡´å…¶ä»–å­ç±»å‹çš„å®ä¾‹çš„<code>color</code>å±æ€§ä¹Ÿè¢«ä¿®æ”¹äº†ã€‚(å› ä¸º<code>color</code>æ˜¯åŸå‹ä¸Šçš„ä¸€ä¸ªå±æ€§æ˜¯è¢«æ‰€æœ‰å®ä¾‹å…±äº«çš„)</p><h1 id="2-å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#2-å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="2.å€Ÿç”¨æ„é€ å‡½æ•°"></a>2.å€Ÿç”¨æ„é€ å‡½æ•°</h1><p>ä¸ºäº†è§£å†³å¼•ç”¨ç±»å‹å±æ€§åœ¨åŸå‹ä¸Šæ‰€å¯¼è‡´çš„é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å­ç±»å‹çš„æ„é€ å‡½æ•°ä¸­ä½¿ç”¨çˆ¶ç±»å‹çš„æ„é€ å‡½æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="comment">// å€Ÿç”¨çˆ¶ç±»å‹çš„æ„é€ å‡½æ•°</span></span><br><span class="line">  SuperType.call(<span class="built_in">this</span>);          </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType();</span><br><span class="line">instance1.colors.push(<span class="string">&quot;black&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(instance1.colors);        <span class="comment">//&quot;red,blue,green,black&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType();</span><br><span class="line"><span class="built_in">console</span>.log(instance2.colors);        <span class="comment">//&quot;red,blue,green&quot;</span></span><br></pre></td></tr></table></figure></p><blockquote><p>å€Ÿç”¨æ„é€ å‡½æ•°è™½ç„¶è§£å†³äº†åŸå‹é“¾ç»§æ‰¿æ‰€å¸¦æ¥çš„é—®é¢˜ï¼Œä½†æ˜¯ç”±äºæ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰å¯¼è‡´æ— æ³•å¤ç”¨å‡½æ•°ã€‚è€Œä¸”çˆ¶ç±»å‹çš„æ–¹æ³•å¯¹å­ç±»å‹ä¹Ÿæ˜¯ä¸å¯è§çš„ã€‚</p></blockquote><h1 id="3-ç»„åˆç»§æ‰¿"><a href="#3-ç»„åˆç»§æ‰¿" class="headerlink" title="3.ç»„åˆç»§æ‰¿"></a>3.ç»„åˆç»§æ‰¿</h1><p>æ—¢ç„¶åŸå‹é“¾ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿éƒ½æœ‰ç¼ºé™·ï¼Œé‚£æˆ‘ä»¬æŠŠå®ƒä»¬ç»“åˆèµ·æ¥äº’è¡¥ï¼Œä¸å°±è§£å†³äº†é—®é¢˜äº†å—ï¼Ÿ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>)</span>&#123;  </span><br><span class="line">    <span class="comment">//ç»§æ‰¿å±æ€§</span></span><br><span class="line">    SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŒ‡å®šåŸå‹</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line"></span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType(<span class="string">&quot;Nicholas&quot;</span>, <span class="number">29</span>);</span><br><span class="line">instance1.colors.push(<span class="string">&quot;black&quot;</span>);</span><br><span class="line">alert(instance1.colors);      <span class="comment">//&quot;red,blue,green,black&quot;</span></span><br><span class="line">instance1.sayName();          <span class="comment">//&quot;Nicholas&quot;;</span></span><br><span class="line">instance1.sayAge();           <span class="comment">//29</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType(<span class="string">&quot;Greg&quot;</span>, <span class="number">27</span>);</span><br><span class="line">alert(instance2.colors);      <span class="comment">//&quot;red,blue,green&quot;</span></span><br><span class="line">instance2.sayName();          <span class="comment">//&quot;Greg&quot;;</span></span><br><span class="line">instance2.sayAge();           <span class="comment">//27â€</span></span><br><span class="line"></span><br><span class="line">æ‘˜å½•æ¥è‡ª: Nicholas C.Zakas. â€œJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬<span class="number">3</span>ç‰ˆï¼‰ã€‚â€ iBooks. </span><br><span class="line"></span><br></pre></td></tr></table></figure></p><blockquote><p>è¿™æ ·æˆ‘ä»¬æ—¢è§£å†³åŸå‹é“¾çš„å¼•ç”¨ç±»å‹è¢«å…±äº«çš„é—®é¢˜ï¼Œä¹Ÿè§£å†³å€Ÿç”¨æ„é€ å‡½æ•°å¯¼è‡´çš„æ— æ³•å¤ç”¨å‡½æ•°å’Œè®¿é—®çˆ¶ç±»å‹çš„æ–¹æ³•çš„é—®é¢˜ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;1-åŸå‹é“¾&quot;&gt;&lt;a href=&quot;#1-åŸå‹é“¾&quot; class=&quot;headerlink&quot; title=&quot;1.åŸå‹é“¾&quot;&gt;&lt;/a&gt;1.åŸå‹é“¾&lt;/h1&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SuperType&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;this&lt;/span&gt;.property = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SuperType.prototype.getSuperValue = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;this&lt;/span&gt;.property;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SubType&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;this&lt;/span&gt;.subproperty = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç»§æ‰¿äº†SuperType&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SubType.prototype = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; SuperType();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SubType.prototype.getSubValue = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;this&lt;/span&gt;.subproperty;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; instance = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; SubType();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alert(instance.getSuperValue());â€&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;æ‘˜å½•æ¥è‡ª: Nicholas C.Zakas. â€œJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;ç‰ˆï¼‰ã€‚â€ iBooks. &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªæ–¹å¼å®ç°ç»§æ‰¿æœ€å¤§çš„é—®é¢˜å°±æ˜¯åœ¨åŒ…å«å¼•ç”¨ç±»å‹çš„åŸå‹ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œè€Œå¯¼è‡´å­ç±»å‹çš„å®ä¾‹å¯¹è¿™ä¸ªå¼•ç”¨ç±»å‹çš„ä¿®æ”¹å¯ä»¥è¢«å…¶ä»–æ‰€æœ‰å­ç±»å‹çœ‹è§ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="javascript" scheme="http://narutohinata.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>Goè¯­è¨€JSONåº“çš„ä½¿ç”¨</title>
    <link href="http://narutohinata.github.io/2018/03/05/Go%E8%AF%AD%E8%A8%80JSON%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://narutohinata.github.io/2018/03/05/Go%E8%AF%AD%E8%A8%80JSON%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/</id>
    <published>2018-03-05T11:52:37.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;jack&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;age&quot;</span>: <span class="number">21</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name <span class="keyword">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">  Age <span class="keyword">int</span> <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">user := User&#123;&#125;</span><br><span class="line">json.Unmarshal([]<span class="keyword">byte</span>(jsonStr), &amp;user)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    <category term="golang" scheme="http://narutohinata.github.io/categories/golang/"/>
    
    
    <category term="golang" scheme="http://narutohinata.github.io/tags/golang/"/>
    
    <category term="json" scheme="http://narutohinata.github.io/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>ActiveSupport::Concernå®ç°åŸç†</title>
    <link href="http://narutohinata.github.io/2017/05/11/ActiveSupport-Concern%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"/>
    <id>http://narutohinata.github.io/2017/05/11/ActiveSupport-Concern%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</id>
    <published>2017-05-11T18:12:26.000Z</published>
    <updated>2022-03-27T03:54:06.391Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨<code>Rails</code>ä¸­æˆ‘ä»¬ç»å¸¸å°†å¯å¤ç”¨çš„ä»£ç æ”¾åœ¨<code>Concern</code>ä¸­ä»¥é˜²æ­¢<code>fat model</code>å…·ä½“ç”¨æ³•å¦‚ä¸‹(å–è‡ªrubychinaæºç )ï¼š<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯å…³é—­å¸–å­åŠŸèƒ½</span></span><br><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">Closeable</span></span></span><br><span class="line">  extend ActiveSupport::Concern</span><br><span class="line"></span><br><span class="line">  included <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">closed?</span></span></span><br><span class="line">    closed_at.present?</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">close!</span></span></span><br><span class="line">    transaction <span class="keyword">do</span></span><br><span class="line">      Reply.create_system_event(<span class="symbol">action:</span> <span class="string">&#x27;close&#x27;</span>, <span class="symbol">topic_id:</span> <span class="keyword">self</span>.id)</span><br><span class="line">      update!(<span class="symbol">closed_at:</span> Time.now)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">open!</span></span></span><br><span class="line">    transaction <span class="keyword">do</span></span><br><span class="line">      update!(<span class="symbol">closed_at:</span> <span class="literal">nil</span>)</span><br><span class="line">      Reply.create_system_event(<span class="symbol">action:</span> <span class="string">&#x27;reopen&#x27;</span>, <span class="symbol">topic_id:</span> <span class="keyword">self</span>.id)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Topic</span> &lt; ApplicationRecord</span></span><br><span class="line">  <span class="keyword">include</span> Closeable</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ä»Šå¤©å°±æ¥çœ‹çœ‹<code>ActiveSupport::Concern</code>æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä»¥åŠå®ƒè§£å†³äº†ä»¥å‰çš„é‚£äº›ç—›ç‚¹?</p><span id="more"></span><h2 id="è§£å†³äº†é‚£äº›ç—›ç‚¹ï¼Ÿ"><a href="#è§£å†³äº†é‚£äº›ç—›ç‚¹ï¼Ÿ" class="headerlink" title="è§£å†³äº†é‚£äº›ç—›ç‚¹ï¼Ÿ"></a>è§£å†³äº†é‚£äº›ç—›ç‚¹ï¼Ÿ</h2><p>  å‡è®¾æˆ‘ä»¬æœ‰2ä¸ªæ¨¡å—<code>module A</code>å’Œ<code>module B</code>,å…¶ä¸­<code>module B</code>åŒ…å«äº†<code>module A</code>ï¼Œç„¶åæˆ‘ä»¬åœ¨ç±»<code>Test</code>ä¸­<code>include B</code>è¿™ä¸ªæ—¶å€™ç±»<code>Test</code>çš„è¡Œä¸ºæ˜¯æˆ‘ä»¬é¢„æƒ³çš„ä¸ä¸€æ ·ï¼š<br>  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">A</span></span></span><br><span class="line">  def <span class="keyword">self</span>.included(base)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># è¿™ä¸ªbaseæ˜¯åŒ…å«è¿™ä¸ªæ¨¡å—çš„module/class</span></span><br><span class="line">  <span class="comment">#  ä¾‹å¦‚ï¼š</span></span><br><span class="line">  <span class="comment">#  class Demo</span></span><br><span class="line">  <span class="comment">#    include A</span></span><br><span class="line">  <span class="comment">#  end</span></span><br><span class="line">  <span class="comment">#  æ­¤æ—¶çš„baseå°±æ˜¯Demo</span></span><br><span class="line">  <span class="comment"># </span></span><br><span class="line">    base.extend ClassMethods  <span class="comment">#æ‰©å±•ç±»æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">a_instance_method</span></span></span><br><span class="line">    <span class="string">&quot;a_instance_method&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">module</span> <span class="title">ClassMethods</span></span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">a_class_method</span></span></span><br><span class="line">      <span class="string">&quot;a_class_method&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">B</span></span></span><br><span class="line">  def <span class="keyword">self</span>.included(base)</span><br><span class="line">    base.extend ClassMethods</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">b_instance_method</span></span></span><br><span class="line">    <span class="string">&quot;b_instance_method&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">module</span> <span class="title">ClassMethods</span></span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">b_class_method</span></span></span><br><span class="line">      <span class="string">&quot;b_class_method&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">include</span> A <span class="comment"># æ³¨æ„è¿™é‡ŒåŒ…å«äº†æ¨¡å—A</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line">  <span class="keyword">include</span> B</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">Test.new.a_instance_method <span class="comment"># =&gt; &quot;a_instance_method&quot;</span></span><br><span class="line">Test.new.b_instance_method <span class="comment"># =&gt; &quot;b_instance_method&quot;</span></span><br><span class="line"></span><br><span class="line">Test.a_class_method <span class="comment"># =&gt; NoMethodError: undefined method `a_class_method&#x27; for Test:Class</span></span><br><span class="line">Test.b_class_method <span class="comment"># =&gt; &quot;b_class_method&quot;</span></span><br></pre></td></tr></table></figure><br>  æˆ‘ä»¬å‘ç°å½“Testè°ƒç”¨<code>a_class_method</code>æ–¹æ³•æ—¶å€™æŠ›å‡ºäº†<code>NoMethodError</code>é”™è¯¯ã€‚</p><p>  å…¶å®æˆ‘ä»¬ä»”ç»†æ€è€ƒä¸‹å°±çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªé‡Œäº†ï¼š</p><blockquote><p>æˆ‘ä»¬åœ¨æ¨¡å—<code>B</code>ä¸­ <code>include</code>äº†æ¨¡å—<code>A</code>çš„æ—¶å€™,<code>B</code>å……å½“äº†<code>base</code>å¯¼è‡´<code>A::ClassMethods</code>æ¨¡å—ä¸­å®šä¹‰çš„æ–¹æ³•å˜æˆäº†<code>module B</code>çš„ç±»æ–¹æ³•</p></blockquote><p>  è€Œæˆ‘ä»¬çš„<code>ActiveSupport::Concern</code>å°±å®Œç¾çš„è§£å†³äº†é“¾å¼åŒ…å«çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹åˆ°åº•æ˜¯æ€ä¹ˆå®ç°çš„å§ã€‚</p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2>  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">ActiveSupport</span></span></span><br><span class="line">  <span class="class"><span class="keyword">module</span> <span class="title">Concern</span></span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">MultipleIncludedBlocks</span> &lt; StandardError <span class="comment">#:nodoc:</span></span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">initialize</span></span></span><br><span class="line">        <span class="keyword">super</span> <span class="string">&quot;Cannot define multiple &#x27;included&#x27; blocks for a Concern&quot;</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿™é‡Œè®¾ç½®äº†ä¸€ä¸ªå˜é‡ç”¨æ¥æ ‡è¯†æ˜¯å¦æ˜¯ä¸€ä¸ª`Concern`æ¨¡å—</span></span><br><span class="line">    def <span class="keyword">self</span>.extended(base) <span class="comment">#:nodoc:</span></span><br><span class="line">      base.instance_variable_set(<span class="symbol">:</span><span class="variable">@_dependencies</span>, [])</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># append_featuresæ–¹æ³•æ˜¯åœ¨æ¨¡å—è¢«åŒ…å«çš„æ—¶å€™è¢«è°ƒç”¨çš„ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªé»˜è®¤å®ç°</span></span><br><span class="line">    <span class="comment"># ç”¨æ¥æ£€æŸ¥è¢«åŒ…å«æ¨¡å—æ˜¯å¦å·²ç»åœ¨åŒ…å«ç±»çš„ç¥–å…ˆé“¾ä¸Šï¼Œå¦‚æœä¸åœ¨åˆ™å°†è¯¥æ¨¡å—åŠ å…¥å…¶ç¥–å…ˆé“¾</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append_features</span><span class="params">(base)</span></span></span><br><span class="line">      <span class="keyword">if</span> base.instance_variable_defined?(<span class="symbol">:</span><span class="variable">@_dependencies</span>)</span><br><span class="line">        base.instance_variable_get(<span class="symbol">:</span><span class="variable">@_dependencies</span>) &lt;&lt; <span class="keyword">self</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span> <span class="keyword">if</span> base &lt; <span class="keyword">self</span></span><br><span class="line">        <span class="variable">@_dependencies</span>.each &#123; <span class="params">|dep|</span> base.<span class="keyword">include</span>(dep) &#125;</span><br><span class="line">        <span class="keyword">super</span></span><br><span class="line">        base.extend const_get(<span class="symbol">:ClassMethods</span>) <span class="keyword">if</span> const_defined?(<span class="symbol">:ClassMethods</span>)</span><br><span class="line">        base.class_eval(&amp;<span class="variable">@_included_block</span>) <span class="keyword">if</span> instance_variable_defined?(<span class="symbol">:</span><span class="variable">@_included_block</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">included</span><span class="params">(base = <span class="literal">nil</span>, &amp;block)</span></span></span><br><span class="line">      <span class="keyword">if</span> base.<span class="literal">nil</span>?</span><br><span class="line">        raise MultipleIncludedBlocks <span class="keyword">if</span> instance_variable_defined?(<span class="symbol">:</span><span class="variable">@_included_block</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable">@_included_block</span> = block</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">super</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”Ÿæˆæ¨¡å—ClassMethodç”¨æ¥æ‰©å±•ç±»æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">class_methods</span><span class="params">(&amp;class_methods_module_definition)</span></span></span><br><span class="line">      mod = const_defined?(<span class="symbol">:ClassMethods</span>, <span class="literal">false</span>) ?</span><br><span class="line">        const_get(<span class="symbol">:ClassMethods</span>) :</span><br><span class="line">        const_set(<span class="symbol">:ClassMethods</span>, Module.new)</span><br><span class="line"></span><br><span class="line">      mod.module_eval(&amp;class_methods_module_definition)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°<code>Concern</code>é€šè¿‡å¤å†™äº†<code>append_features</code>æ”¹å˜äº†é»˜è®¤çš„åŒ…å«è¡Œä¸ºï¼Œæˆ‘ä»¬åŒ…å«ä¸€ä¸ªæ¨¡å—æ—¶<code>Concern</code>ä¼šé€šè¿‡<code>@_dependencies</code>æ£€æµ‹<code>base</code>æ˜¯å¦æ˜¯ä¸€ä¸ª<code>Concern</code>å¦‚æœæ˜¯ä¸€ä¸ª<code>Concern</code>æˆ‘ä»¬å°±æŠŠå®ƒåŠ åˆ°<code>@_dependencies</code>å˜é‡ä¸­ï¼ŒåŒæ—¶è¿”å›<code>false</code>ä»¥æŒ‡æ˜è¯¥æ¨¡å—æ²¡æœ‰è¢«çœŸæ­£è¢«åŒ…å«ã€‚å¦‚æœä¸æ˜¯ä¸€ä¸ª<code>Concern</code>æ­¤æ—¶åˆ†ä¸¤ç§æƒ…å†µï¼š</p><ol><li>å½“<code>Concern</code>å·²ç»å‡ºç°åœ¨åŒ…å«ç±»çš„ç¥–å…ˆé“¾ä¸­(<code>if base &lt; self</code>)æˆ‘ä»¬è¿”å›<code>false</code></li><li>å½“<code>Concern</code>æ²¡æœ‰å‡ºç°åœ¨åŒ…å«ç±»çš„ç¥–å…ˆé“¾ä¸­ï¼Œæˆ‘ä»¬å°†<code>@_dependencies</code>å­˜å‚¨çš„ä¾èµ–é€’å½’å»åŒ…å«(<code>@_dependencies.each &#123; |dep| base.include(dep) &#125;</code>)</li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¹Ÿè¦æŠŠè‡ªèº«ä¹ŸåŠ å…¥ç¥–å…ˆé“¾ä¸­(<code>super</code>)ã€‚<br>ç„¶å<code>extend</code>æ–¹æ³•<code>class_methods</code>æ‰€å®šä¹‰çš„å†…å®¹ï¼Œä»¥åŠä½¿ç”¨<code>class_eval</code>åœ¨<code>base</code>ç±»ä¸­æ‰§è¡Œ<code>included</code>æ–¹æ³•ä¸­æ‰€å®šä¹‰çš„å—</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨&lt;code&gt;Rails&lt;/code&gt;ä¸­æˆ‘ä»¬ç»å¸¸å°†å¯å¤ç”¨çš„ä»£ç æ”¾åœ¨&lt;code&gt;Concern&lt;/code&gt;ä¸­ä»¥é˜²æ­¢&lt;code&gt;fat model&lt;/code&gt;å…·ä½“ç”¨æ³•å¦‚ä¸‹(å–è‡ªrubychinaæºç )ï¼š&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å¼€å¯å…³é—­å¸–å­åŠŸèƒ½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Closeable&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  extend ActiveSupport::Concern&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  included &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;closed?&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    closed_at.present?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;close!&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    transaction &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Reply.create_system_event(&lt;span class=&quot;symbol&quot;&gt;action:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;close&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;topic_id:&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.id)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      update!(&lt;span class=&quot;symbol&quot;&gt;closed_at:&lt;/span&gt; Time.now)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;open!&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    transaction &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      update!(&lt;span class=&quot;symbol&quot;&gt;closed_at:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Reply.create_system_event(&lt;span class=&quot;symbol&quot;&gt;action:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;reopen&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;topic_id:&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.id)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Topic&lt;/span&gt; &amp;lt; ApplicationRecord&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; Closeable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»Šå¤©å°±æ¥çœ‹çœ‹&lt;code&gt;ActiveSupport::Concern&lt;/code&gt;æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä»¥åŠå®ƒè§£å†³äº†ä»¥å‰çš„é‚£äº›ç—›ç‚¹?&lt;/p&gt;</summary>
    
    
    
    
    <category term="activeSupport" scheme="http://narutohinata.github.io/tags/activeSupport/"/>
    
    <category term="rails" scheme="http://narutohinata.github.io/tags/rails/"/>
    
  </entry>
  
</feed>
