<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Chromer&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Chromer&#39;s Blog">
<meta property="og:url" content="http://narutohinata.github.io/index.html">
<meta property="og:site_name" content="Chromer&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chromer">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Chromer's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Chromer&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://narutohinata.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-为啥Redis使用跳表而不是使用红黑树" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/04/28/%E4%B8%BA%E5%95%A5Redis%E4%BD%BF%E7%94%A8%E8%B7%B3%E8%A1%A8%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%BF%E7%94%A8%E7%BA%A2%E9%BB%91%E6%A0%91/" class="article-date">
  <time class="dt-published" datetime="2020-04-28T15:57:29.000Z" itemprop="datePublished">2020-04-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/04/28/%E4%B8%BA%E5%95%A5Redis%E4%BD%BF%E7%94%A8%E8%B7%B3%E8%A1%A8%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%BF%E7%94%A8%E7%BA%A2%E9%BB%91%E6%A0%91/">我的代码小片段</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>There are a few reasons:</p>
<ol>
<li>They are not very memory intensive. It’s up to you basically. Changing parameters about the probability of a node to have a given number of levels will make then less memory intensive than btrees.</li>
<li>A sorted set is often target of many ZRANGE or ZREVRANGE operations, that is, traversing the skip list as a linked list. With this operation the cache locality of skip lists is at least as good as with other kind of balanced trees.</li>
<li>They are simpler to implement, debug, and so forth. For instance thanks to the skip list simplicity I received a patch (already in Redis master) with augmented skip lists implementing ZRANK in O(log(N)). It required little changes to the code.</li>
</ol>
<p>About the Append Only durability &amp; speed, I don’t think it is a good idea to optimize Redis at cost of more code and more complexity for a use case that IMHO should be rare for the Redis target (fsync() at every command). Almost no one is using this feature even with ACID SQL databases, as the performance hint is big anyway.</p>
<p>About threads: our experience shows that Redis is mostly I/O bound. I’m using threads to serve things from Virtual Memory. The long term solution to exploit all the cores, assuming your link is so fast that you can saturate a single core, is running multiple instances of Redis (no locks, almost fully scalable linearly with number of cores), and using the “Redis Cluster” solution that I plan to develop in the future.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2020/04/28/%E4%B8%BA%E5%95%A5Redis%E4%BD%BF%E7%94%A8%E8%B7%B3%E8%A1%A8%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%BF%E7%94%A8%E7%BA%A2%E9%BB%91%E6%A0%91/" data-id="ckmmteokl000vmmnv030y5oxx" data-title="我的代码小片段" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Dom元素的一些宽高计算值" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/03/Dom%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%BD%E9%AB%98%E8%AE%A1%E7%AE%97%E5%80%BC/" class="article-date">
  <time class="dt-published" datetime="2019-03-03T14:45:41.000Z" itemprop="datePublished">2019-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/03/Dom%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%BD%E9%AB%98%E8%AE%A1%E7%AE%97%E5%80%BC/">Dom元素的一些宽高计算值</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2019/03/03/Dom%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%BD%E9%AB%98%E8%AE%A1%E7%AE%97%E5%80%BC/" data-id="ckmmteok10008mmnvg069assh" data-title="Dom元素的一些宽高计算值" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-R大博客里对闭包的解释【转】" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/06/08/R%E5%A4%A7%E5%8D%9A%E5%AE%A2%E9%87%8C%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E8%A7%A3%E9%87%8A%E3%80%90%E8%BD%AC%E3%80%91/" class="article-date">
  <time class="dt-published" datetime="2018-06-08T11:27:49.000Z" itemprop="datePublished">2018-06-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/08/R%E5%A4%A7%E5%8D%9A%E5%AE%A2%E9%87%8C%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E8%A7%A3%E9%87%8A%E3%80%90%E8%BD%AC%E3%80%91/">R大博客里对闭包的解释【转】</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a target="_blank" rel="noopener" href="http://rednaxelafx.iteye.com/blog/245022">转自 RednaxelaFX 博客评论</a></p>
</blockquote>
<p>我不理解你不理解的是什么……<code>闭包</code>的定义很好理解撒。要点有俩： </p>
<ol>
<li>一个含有<code>自由变量</code>的<code>函数</code>； </li>
<li>这些自由变量所在的<code>环境</code>。</li>
</ol>
<p>外部环境持有内部函数所使用的自由变量，对内部函数形成“闭包”，就这样…… 简单但不严格的说，一个函数的“<code>自由变量</code>”就是既不是参数也不是局部变量的变量。 </p>
        
          <p class="article-more-link">
            <a href="/2018/06/08/R%E5%A4%A7%E5%8D%9A%E5%AE%A2%E9%87%8C%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E8%A7%A3%E9%87%8A%E3%80%90%E8%BD%AC%E3%80%91/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/06/08/R%E5%A4%A7%E5%8D%9A%E5%AE%A2%E9%87%8C%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E8%A7%A3%E9%87%8A%E3%80%90%E8%BD%AC%E3%80%91/" data-id="ckmmteokd000ommnvfhjpax2v" data-title="R大博客里对闭包的解释【转】" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-javascript各排序算法实现" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/06/06/javascript%E5%90%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/" class="article-date">
  <time class="dt-published" datetime="2018-06-06T11:14:34.000Z" itemprop="datePublished">2018-06-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/06/javascript%E5%90%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/">javascript各排序算法实现</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li>冒泡排序(普通版)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubble_sort</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = data.length - <span class="number">1</span>; i &gt; <span class="number">0</span> ; i-- )&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[j] &gt; data[j+<span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">let</span> tmp = data[j+<span class="number">1</span>];</span><br><span class="line">        data[j+<span class="number">1</span>] = data[j];</span><br><span class="line">        data[j] = tmp;</span><br><span class="line">      &#125;      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>冒泡排序（改良版1)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubble_sort1</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = data.length - <span class="number">1</span>; i &gt; <span class="number">0</span> ; i-- )&#123;</span><br><span class="line">    <span class="keyword">let</span> tag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[j] &gt; data[j+<span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">let</span> tmp = data[j+<span class="number">1</span>];</span><br><span class="line">        data[j+<span class="number">1</span>] = data[j];</span><br><span class="line">        data[j] = tmp;</span><br><span class="line">        tag = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tag) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
这里说下改良版的思路，上一个版本没有记录上一趟冒泡的排序状态，导致必须执行<code>n-1</code>趟排序。考虑最好的情况，如果一开始序列就是有序的，如果使用第一种排序的话，导致可以<code>O(n)</code>的解决的问题花了<code>O(n^2)</code>的时间了，这显然是不合适的，于是我们在每一趟排序开始前，设置一个表示序列是否有序的状态量(<code>let tag</code>)，并认为一开始是有序的(<code>true</code>)，然后在交换排序过程中一旦发生了交换就把状态量设置为无序状态（<code>false</code>)。然后在进行下一趟排序的时候检查这个状态量，如果是<code>true</code>则说明序列此时已经有序无需进行下一趟了直接返回就行了，如果为<code>false</code>则表示序列此时还是无序状态则需要进行下一趟排序。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/06/06/javascript%E5%90%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/" data-id="ckmmteokg000smmnv222z8ox1" data-title="javascript各排序算法实现" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-R语言语法【一】" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/05/08/R%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E3%80%90%E4%B8%80%E3%80%91/" class="article-date">
  <time class="dt-published" datetime="2018-05-08T20:14:18.000Z" itemprop="datePublished">2018-05-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/05/08/R%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E3%80%90%E4%B8%80%E3%80%91/">R语言语法【一】</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="赋值语法"><a href="#赋值语法" class="headerlink" title="赋值语法"></a>赋值语法</h1><p>在R语言中赋值使用<code>&lt;-</code>,比如下面把10赋值给变量a:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a&lt;-<span class="number">10</span></span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2018/05/08/R%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E3%80%90%E4%B8%80%E3%80%91/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/05/08/R%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E3%80%90%E4%B8%80%E3%80%91/" data-id="ckmmteokf000pmmnv1oa15q2u" data-title="R语言语法【一】" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R%E8%AF%AD%E8%A8%80/" rel="tag">R语言</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Nodejs代码片段" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/05/08/Nodejs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" class="article-date">
  <time class="dt-published" datetime="2018-05-08T17:38:24.000Z" itemprop="datePublished">2018-05-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/05/08/Nodejs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/">Nodejs代码片段</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Nodejs-Base64编码和解码"><a href="#Nodejs-Base64编码和解码" class="headerlink" title="Nodejs Base64编码和解码"></a>Nodejs <code>Base64</code>编码和解码</h1><ol>
<li><p>Base64编码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;我爱js&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> decode_str = Buffer.from(str).toString(<span class="string">&#x27;base64&#x27;</span>) <span class="comment">// &gt; &#x27;5oiR54ixanM=&#x27;</span></span><br><span class="line"><span class="comment">// 或者这样：new Buffer(str).toString(&#x27;base64&#x27;) 【已弃用】</span></span><br></pre></td></tr></table></figure></li>
<li><p>Base64解码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> decode_str = <span class="string">&#x27;5oiR54ixanM=&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str = Buffer.from(decode_str, <span class="string">&#x27;base64&#x27;</span>).toString() <span class="comment">// &gt; 我爱js</span></span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/05/08/Nodejs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" data-id="ckmmteok5000fmmnv3allao5d" data-title="Nodejs代码片段" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nodejs-%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5-Tips/" rel="tag">Nodejs 代码片段 Tips</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-mongodb下n-m关系" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/04/29/mongodb%E4%B8%8Bn-m%E5%85%B3%E7%B3%BB/" class="article-date">
  <time class="dt-published" datetime="2018-04-29T10:46:39.000Z" itemprop="datePublished">2018-04-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/04/29/mongodb%E4%B8%8Bn-m%E5%85%B3%E7%B3%BB/">mongodb下n:m关系</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在用户关注系统中关注人和被关注人是<code>多对多关系</code>,在关系型数据库中我们很容易通过中间表关联实现这个功能。关注和取消关注无非就是对这个中间表的记录的增加和删除。那么在<code>mongodb</code>中如何实现这种多对多关系呢？我们知道<code>关注操作</code>就是<code>被关注操作</code>的逆操作，当用户<code>A</code>关注用户<code>B</code>的时候,也就是用户<code>B</code>被用户<code>A</code>关注了。那么我们可以在用户文档中维护一个用户关注的用户集合<code>followings</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  username: <span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">  followings: [ObjectId]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  username: <span class="string">&#x27;B&#x27;</span>,</span><br><span class="line">  followings: [ObjectId]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2018/04/29/mongodb%E4%B8%8Bn-m%E5%85%B3%E7%B3%BB/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/04/29/mongodb%E4%B8%8Bn-m%E5%85%B3%E7%B3%BB/" data-id="ckmmteokh000tmmnvgjl0cfe8" data-title="mongodb下n:m关系" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-我的代码小片段" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/04/28/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%89%87%E6%AE%B5/" class="article-date">
  <time class="dt-published" datetime="2018-04-28T15:57:29.000Z" itemprop="datePublished">2018-04-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/04/28/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%89%87%E6%AE%B5/">我的代码小片段</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li><p>获取cookie</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cookies = <span class="built_in">document</span>.cookie;</span><br><span class="line">  <span class="keyword">let</span> _cookies = cookies.split(<span class="string">&quot;;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> _cookies.reduce(<span class="function">(<span class="params">a, cookie</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> _cookie = cookie.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.assign(a, &#123; [_cookie[<span class="number">0</span>]]: _cookie[<span class="number">1</span>]&#125;);</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2018/04/28/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%89%87%E6%AE%B5/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/04/28/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%89%87%E6%AE%B5/" data-id="ckmmteokm000ymmnv3m4wdw4a" data-title="我的代码小片段" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-MongoDB中的1:m关系" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/04/28/MongoDB%E4%B8%AD%E7%9A%841:m%E5%85%B3%E7%B3%BB/" class="article-date">
  <time class="dt-published" datetime="2018-04-28T13:15:05.000Z" itemprop="datePublished">2018-04-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/04/28/MongoDB%E4%B8%AD%E7%9A%841:m%E5%85%B3%E7%B3%BB/">MongonDB中的1:m关系</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在博客系统中用户(user)和博文(post)是1对多关系,在mongodb中我们怎么表述这种关系呢？在mongo中我们可以利用在多端保存1端的<code>ObjectId</code>来维持这种<code>1:m</code>关系,下面分别列出<code>user</code>和<code>post</code>的结构:</p>
<ol>
<li><code>user</code>的结构<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span> : ObjectId(<span class="string">&quot;5ae3caa35ece85125d2429f7&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;username&quot;</span> : <span class="string">&quot;百思可乐1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;age&quot;</span> : <span class="number">21</span>,</span><br><span class="line">    <span class="attr">&quot;updateAt&quot;</span> : ISODate(<span class="string">&quot;2018-04-28T01:11:54.698Z&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;createdAt&quot;</span> : ISODate(<span class="string">&quot;2018-04-28T01:11:54.698Z&quot;</span>),</span><br><span class="line">    <span class="attr">&quot;__v&quot;</span> : <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
        
          <p class="article-more-link">
            <a href="/2018/04/28/MongoDB%E4%B8%AD%E7%9A%841:m%E5%85%B3%E7%B3%BB/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/04/28/MongoDB%E4%B8%AD%E7%9A%841:m%E5%85%B3%E7%B3%BB/" data-id="ckmmteok4000dmmnv699dassb" data-title="MongonDB中的1:m关系" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Node模块列表" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/04/10/Node%E6%A8%A1%E5%9D%97%E5%88%97%E8%A1%A8/" class="article-date">
  <time class="dt-published" datetime="2018-04-10T14:42:13.000Z" itemprop="datePublished">2018-04-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/04/10/Node%E6%A8%A1%E5%9D%97%E5%88%97%E8%A1%A8/">Node模块列表</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li>读写Excel文件 <a target="_blank" rel="noopener" href="https://github.com/guyonroche/exceljs">ExcelJs</a></li>
<li>时间格式化工具 <a target="_blank" rel="noopener" href="https://date-fns.org/">date-fns</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://narutohinata.github.io/2018/04/10/Node%E6%A8%A1%E5%9D%97%E5%88%97%E8%A1%A8/" data-id="ckmmteok6000hmmnvhy3c1oe0" data-title="Node模块列表" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs-%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5-Tips/" rel="tag">Nodejs 代码片段 Tips</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rails/" rel="tag">Rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R%E8%AF%AD%E8%A8%80/" rel="tag">R语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Nodejs-%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5-Tips/" style="font-size: 10px;">Nodejs 代码片段 Tips</a> <a href="/tags/Rails/" style="font-size: 20px;">Rails</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/R%E8%AF%AD%E8%A8%80/" style="font-size: 10px;">R语言</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/28/%E4%B8%BA%E5%95%A5Redis%E4%BD%BF%E7%94%A8%E8%B7%B3%E8%A1%A8%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BD%BF%E7%94%A8%E7%BA%A2%E9%BB%91%E6%A0%91/">我的代码小片段</a>
          </li>
        
          <li>
            <a href="/2019/03/03/Dom%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%BD%E9%AB%98%E8%AE%A1%E7%AE%97%E5%80%BC/">Dom元素的一些宽高计算值</a>
          </li>
        
          <li>
            <a href="/2018/06/08/R%E5%A4%A7%E5%8D%9A%E5%AE%A2%E9%87%8C%E5%AF%B9%E9%97%AD%E5%8C%85%E7%9A%84%E8%A7%A3%E9%87%8A%E3%80%90%E8%BD%AC%E3%80%91/">R大博客里对闭包的解释【转】</a>
          </li>
        
          <li>
            <a href="/2018/06/06/javascript%E5%90%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/">javascript各排序算法实现</a>
          </li>
        
          <li>
            <a href="/2018/05/08/R%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E3%80%90%E4%B8%80%E3%80%91/">R语言语法【一】</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chromer<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>